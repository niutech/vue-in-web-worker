{"version":3,"file":"worker.js","sources":["../../../output/worker-thread/strings.js","../../../output/worker-thread/phase.js","../../../output/worker-thread/nodes.js","../../../output/worker-thread/MutationTransfer.js","../../../output/worker-thread/amp/amp.js","../../../output/worker-thread/function.js","../../../output/utils.js","../../../output/worker-thread/MutationObserver.js","../../../output/worker-thread/dom/Node.js","../../../output/worker-thread/dom/CharacterData.js","../../../output/worker-thread/dom/Comment.js","../../../output/worker-thread/amp/delete-globals.js","../../../output/worker-thread/dom/matchElements.js","../../../output/worker-thread/dom/ParentNode.js","../../../output/worker-thread/dom/DOMTokenList.js","../../../output/worker-thread/dom/Attr.js","../../../output/worker-thread/css/CSSStyleDeclaration.js","../../../output/worker-thread/dom/enhanceElement.js","../../../output/transfer/TransferrableNodes.js","../../../output/third_party/html-parser/html-parser.js","../../../output/worker-thread/Event.js","../../../output/worker-thread/dom/Element.js","../../../output/worker-thread/dom/HTMLElement.js","../../../output/worker-thread/dom/HTMLAnchorElement.js","../../../output/worker-thread/dom/HTMLButtonElement.js","../../../output/worker-thread/serializeTransferrableObject.js","../../../output/worker-thread/canvas/CanvasGradient.js","../../../output/worker-thread/canvas/CanvasPattern.js","../../../output/worker-thread/canvas/OffscreenCanvasPolyfill.js","../../../output/worker-thread/canvas/canvas-utils.js","../../../output/worker-thread/canvas/FakeNativeCanvasPattern.js","../../../output/worker-thread/canvas/CanvasRenderingContext2D.js","../../../output/worker-thread/dom/HTMLCanvasElement.js","../../../output/worker-thread/dom/HTMLDataElement.js","../../../output/worker-thread/dom/HTMLDataListElement.js","../../../output/worker-thread/dom/HTMLEmbedElement.js","../../../output/worker-thread/dom/HTMLFormControlsMixin.js","../../../output/worker-thread/dom/HTMLFieldSetElement.js","../../../output/worker-thread/dom/HTMLFormElement.js","../../../output/worker-thread/dom/HTMLIFrameElement.js","../../../output/worker-thread/dom/HTMLImageElement.js","../../../output/worker-thread/dom/HTMLInputLabelsMixin.js","../../../output/worker-thread/dom/HTMLInputElement.js","../../../output/worker-thread/dom/HTMLLabelElement.js","../../../output/worker-thread/dom/HTMLLinkElement.js","../../../output/worker-thread/dom/HTMLMapElement.js","../../../output/worker-thread/dom/HTMLMeterElement.js","../../../output/worker-thread/dom/HTMLModElement.js","../../../output/worker-thread/dom/HTMLOListElement.js","../../../output/worker-thread/dom/HTMLOptionElement.js","../../../output/worker-thread/dom/HTMLProgressElement.js","../../../output/worker-thread/dom/HTMLQuoteElement.js","../../../output/worker-thread/dom/HTMLScriptElement.js","../../../output/worker-thread/dom/HTMLSelectElement.js","../../../output/worker-thread/dom/HTMLSourceElement.js","../../../output/worker-thread/dom/HTMLStyleElement.js","../../../output/worker-thread/dom/HTMLTableCellElement.js","../../../output/worker-thread/dom/HTMLTableColElement.js","../../../output/worker-thread/dom/HTMLTableElement.js","../../../output/worker-thread/dom/HTMLTableRowElement.js","../../../output/worker-thread/dom/HTMLTableSectionElement.js","../../../output/worker-thread/dom/HTMLTimeElement.js","../../../output/worker-thread/dom/Text.js","../../../output/worker-thread/dom/DocumentFragment.js","../../../output/worker-thread/SyncValuePropagation.js","../../../output/worker-thread/ResizePropagation.js","../../../output/worker-thread/dom/Document.js","../../../output/worker-thread/Storage.js","../../../output/worker-thread/initialize.js","../../../output/worker-thread/AnimationFrame.js","../../../output/worker-thread/dom/SVGElement.js","../../../output/worker-thread/long-task.js","../../../output/worker-thread/index.amp.js"],"sourcesContent":["/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nlet count = 0;\nlet transfer = [];\nconst mapping = new Map();\n/**\n * Stores a string in mapping and returns the index of the location.\n * @param value string to store\n * @return location in map\n */\nexport function store(value) {\n    if (mapping.has(value)) {\n        // Safe to cast since we verified the mapping contains the value\n        return mapping.get(value);\n    }\n    mapping.set(value, count);\n    transfer.push(value);\n    return count++;\n}\n/**\n * Retrieve the index for a string (mostly used for tests).\n * @param value string value we need to know the index of\n * @returns index in the map for the string\n */\nexport function getForTesting(value) {\n    return mapping.get(value);\n}\nexport function getForTestingPartial(value) {\n    const found = Array.from(mapping.keys()).find((str) => str.includes(value));\n    if (found) {\n        return mapping.get(found);\n    }\n}\n/**\n * Returns strings registered but not yet transferred.\n * Side effect: Resets the transfer array to default value, to prevent passing the same values multiple times.\n */\nexport function consume() {\n    const strings = transfer;\n    transfer = [];\n    return strings;\n}\n//# sourceMappingURL=strings.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport let phase = 0 /* Initializing */;\nexport const set = (newPhase) => (phase = newPhase);\n//# sourceMappingURL=phase.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { phase } from './phase';\nlet count = 0;\nlet transfer = [];\nconst mapping = new Map();\n/**\n * Override the store for a node during the initialization phase.\n * @param node Node to store and modify with index\n * @param override Override number to use as the identifier.\n *\n * NOTE: THIS IS ONLY TO BE USED DURING INITIALIZATION.\n */\nexport function storeOverride(node, override) {\n    if (phase === 0 /* Initializing */) {\n        mapping.set((node[7 /* index */] = override), node);\n        count = Math.max(count, override);\n    }\n    return override;\n}\n/**\n * Stores a node in mapping, and makes the index available on the Node directly.\n * @param node Node to store and modify with index\n * @return index Node was stored with in mapping\n */\nexport function store(node) {\n    if (node[7 /* index */] !== undefined) {\n        return node[7 /* index */];\n    }\n    mapping.set((node[7 /* index */] = ++count), node);\n    if (phase > 0 /* Initializing */) {\n        // After Initialization, include all future dom node creation into the list for next transfer.\n        transfer.push(node);\n    }\n    return count;\n}\n/**\n * Retrieves a node based on an index.\n * @param index location in map to retrieve a Node for\n * @return either the Node represented in index position, or null if not available.\n */\nexport function get(index) {\n    // mapping has a 1 based index, since on first store we ++count before storing.\n    return (!!index && mapping.get(index)) || null;\n}\n/**\n * Returns nodes registered but not yet transferred.\n * Side effect: Resets the transfer array to default value, to prevent passing the same values multiple times.\n */\nexport function consume() {\n    const copy = transfer;\n    transfer = [];\n    return copy;\n}\n//# sourceMappingURL=nodes.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { consume as consumeNodes } from './nodes';\nimport { consume as consumeStrings } from './strings';\nimport { phase, set as setPhase } from './phase';\nlet pending = false;\nlet pendingMutations = [];\n// TODO(choumx): Change `mutation` to Array<Uint16> to prevent casting errors e.g. integer underflow, precision loss.\nexport function transfer(document, mutation) {\n    if (phase > 0 /* Initializing */ && document[58 /* allowTransfer */]) {\n        pending = true;\n        pendingMutations = pendingMutations.concat(mutation);\n        Promise.resolve().then((_) => {\n            if (pending) {\n                const nodes = new Uint16Array(consumeNodes().reduce((acc, node) => acc.concat(node[8 /* creationFormat */]), [])).buffer;\n                const mutations = new Uint16Array(pendingMutations).buffer;\n                document.postMessage({\n                    [54 /* phase */]: phase,\n                    [12 /* type */]: phase === 2 /* Mutating */ ? 3 /* MUTATE */ : 2 /* HYDRATE */,\n                    [37 /* nodes */]: nodes,\n                    [41 /* strings */]: consumeStrings(),\n                    [36 /* mutations */]: mutations,\n                }, [nodes, mutations]);\n                pendingMutations = [];\n                pending = false;\n                setPhase(2 /* Mutating */);\n            }\n        });\n    }\n}\n//# sourceMappingURL=MutationTransfer.js.map","/**\n * Copyright 2019 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { store } from '../strings';\nimport { transfer } from '../MutationTransfer';\nexport class AMP {\n    constructor(document) {\n        this.document = document;\n    }\n    /**\n     * Returns a promise that resolves with the value of `key`.\n     * @param key\n     */\n    getState(key) {\n        return new Promise((resolve) => {\n            const messageHandler = (event) => {\n                const message = event.data;\n                if (message[12 /* type */] !== 11 /* GET_STORAGE */) {\n                    return;\n                }\n                // TODO: There is a race condition here if there are multiple concurrent\n                // getState(k) messages in flight, where k is the same value.\n                const storageMessage = message;\n                if (storageMessage[74 /* storageKey */] !== key) {\n                    return;\n                }\n                this.document.removeGlobalEventListener('message', messageHandler);\n                const value = storageMessage[21 /* value */];\n                resolve(value);\n            };\n            this.document.addGlobalEventListener('message', messageHandler);\n            transfer(this.document, [12 /* STORAGE */, 1 /* GET */, 2 /* AmpState */, /* key */ store(key), /* value */ 0]);\n            setTimeout(resolve, 500, null); // TODO: Why a magical constant, define and explain.\n        });\n    }\n    /**\n     * Deep-merges `state` into the existing state.\n     * @param state\n     */\n    setState(state) {\n        // Stringify `state` so it can be post-messaged as a transferrable.\n        let stringified;\n        try {\n            stringified = JSON.stringify(state);\n        }\n        catch (e) {\n            throw new Error(`AMP.setState only accepts valid JSON as input.`);\n        }\n        transfer(this.document, [12 /* STORAGE */, 2 /* SET */, 2 /* AmpState */, /* key */ 0, /* value */ store(stringified)]);\n    }\n}\n//# sourceMappingURL=amp.js.map","/**\n * Copyright 2020 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { transfer } from './MutationTransfer';\nimport { store } from './strings';\nconst exportedFunctions = {};\nexport function callFunctionMessageHandler(event, document) {\n    const msg = event.data;\n    if (msg[12 /* type */] !== 12 /* FUNCTION */) {\n        return;\n    }\n    const functionMessage = msg;\n    const fnIdentifier = functionMessage[77 /* functionIdentifier */];\n    const fnArguments = JSON.parse(functionMessage[78 /* functionArguments */]);\n    const index = functionMessage[7 /* index */];\n    const fn = exportedFunctions[fnIdentifier];\n    if (!fn) {\n        transfer(document, [\n            13 /* FUNCTION_CALL */,\n            2 /* REJECT */,\n            index,\n            store(JSON.stringify(`[worker-dom]: Exported function \"${fnIdentifier}\" could not be found.`)),\n        ]);\n        return;\n    }\n    Promise.resolve(fn) // Forcing promise flows allows us to skip a try/catch block.\n        .then((f) => f.apply(null, fnArguments))\n        .then((value) => {\n        transfer(document, [13 /* FUNCTION_CALL */, 1 /* RESOLVE */, index, store(JSON.stringify(value))]);\n    }, (err) => {\n        const errorMessage = JSON.stringify(err.message || err);\n        transfer(document, [\n            13 /* FUNCTION_CALL */,\n            2 /* REJECT */,\n            index,\n            store(JSON.stringify(`[worker-dom]: Function \"${fnIdentifier}\" threw: \"${errorMessage}\"`)),\n        ]);\n    });\n}\nexport function exportFunction(name, fn) {\n    if (!name || name === '') {\n        throw new Error(`[worker-dom]: Attempt to export function was missing an identifier.`);\n    }\n    if (typeof fn !== 'function') {\n        throw new Error(`[worker-dom]: Attempt to export non-function failed: (\"${name}\", ${typeof fn}).`);\n    }\n    if (name in exportedFunctions) {\n        throw new Error(`[worker-dom]: Attempt to re-export function failed: \"${name}\".`);\n    }\n    exportedFunctions[name] = fn;\n}\nexport function resetForTesting() {\n    for (const key of Object.keys(exportedFunctions)) {\n        delete exportedFunctions[key];\n    }\n}\n//# sourceMappingURL=function.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport const toLower = (value) => value.toLowerCase();\nexport const toUpper = (value) => value.toUpperCase();\nexport const containsIndexOf = (pos) => pos !== -1;\nexport const keyValueString = (key, value) => `${key}=\"${value}\"`;\n//# sourceMappingURL=utils.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a;\nimport { transfer } from './MutationTransfer';\nconst observers = [];\nlet pendingMutations = false;\n/**\n * @param observerTarget\n * @param target\n */\nconst matchesIndex = (observerTarget, target) => {\n    return !!observerTarget && observerTarget[7 /* index */] === target[7 /* index */];\n};\n/**\n * @param observer\n * @param record\n */\nconst pushMutation = (observer, record) => {\n    observer.pushRecord(record);\n    if (!pendingMutations) {\n        pendingMutations = true;\n        Promise.resolve().then(() => {\n            pendingMutations = false;\n            observers.forEach((observer) => observer.callback(observer.takeRecords()));\n        });\n    }\n};\n/**\n * @param document\n * @param record\n * @param transferable\n */\nexport function mutate(document, record, transferable) {\n    // Post-message `transferable` to the main thread to apply mutations.\n    transfer(document, transferable);\n    // The MutationRecord is only used for external callers of MutationObserver.\n    observers.forEach((observer) => {\n        for (let t = record.target; t; t = t.parentNode) {\n            if (matchesIndex(observer.target, t)) {\n                pushMutation(observer, record);\n                break;\n            }\n        }\n    });\n}\nexport class MutationObserver {\n    constructor(callback) {\n        this[_a] = [];\n        this.callback = callback;\n    }\n    /**\n     * Register the MutationObserver instance to observe a Nodes mutations.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver\n     * @param target Node to observe DOM mutations\n     */\n    observe(target, options) {\n        this.disconnect();\n        this.target = target;\n        this.options = options || {};\n        observers.push(this);\n    }\n    /**\n     * Stop the MutationObserver instance from observing a Nodes mutations.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver\n     */\n    disconnect() {\n        this.target = null;\n        const index = observers.indexOf(this);\n        if (index >= 0) {\n            observers.splice(index, 1);\n        }\n    }\n    /**\n     * Empties the MutationObserver instance's record queue and returns what was in there.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver\n     * @return Mutation Records stored on this MutationObserver instance.\n     */\n    takeRecords() {\n        const records = this[42 /* records */];\n        return records.splice(0, records.length);\n    }\n    /**\n     * NOTE: This method doesn't exist on native MutationObserver.\n     * @param record MutationRecord to store for this instance.\n     */\n    pushRecord(record) {\n        this[42 /* records */].push(record);\n    }\n}\n_a = 42 /* records */;\n//# sourceMappingURL=MutationObserver.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a;\nimport { store as storeNodeMapping, storeOverride as storeOverrideNodeMapping } from '../nodes';\nimport { toLower } from '../../utils';\nimport { mutate } from '../MutationObserver';\nimport { store as storeString } from '../strings';\nimport { transfer } from '../MutationTransfer';\n/**\n * Propagates a property change for a Node to itself and all childNodes.\n * @param node Node to start applying change to\n * @param property Property to modify\n * @param value New value to apply\n */\nexport const propagate = (node, property, value) => {\n    node[property] = value;\n    node.childNodes.forEach((child) => propagate(child, property, value));\n};\n// https://developer.mozilla.org/en-US/docs/Web/API/Node\n// https://developer.mozilla.org/en-US/docs/Web/API/EventTarget\n//\n// Please note, in this implmentation Node doesn't extend EventTarget.\n// This is intentional to reduce the number of classes.\nexport class Node {\n    constructor(nodeType, nodeName, ownerDocument, overrideIndex) {\n        this.childNodes = [];\n        this.parentNode = null;\n        this.isConnected = false;\n        this[_a] = {};\n        this.nodeType = nodeType;\n        this.nodeName = nodeName;\n        this.ownerDocument = ownerDocument || this;\n        this[45 /* scopingRoot */] = this;\n        this[7 /* index */] = overrideIndex ? storeOverrideNodeMapping(this, overrideIndex) : storeNodeMapping(this);\n        this[9 /* transferredFormat */] = [this[7 /* index */]];\n    }\n    // Unimplemented Properties\n    // Node.baseURI – https://developer.mozilla.org/en-US/docs/Web/API/Node/baseURI\n    // Unimplemented Methods\n    // Node.compareDocumentPosition() – https://developer.mozilla.org/en-US/docs/Web/API/Node/compareDocumentPosition\n    // Node.getRootNode() – https://developer.mozilla.org/en-US/docs/Web/API/Node/getRootNode\n    // Node.isDefaultNamespace() – https://developer.mozilla.org/en-US/docs/Web/API/Node/isDefaultNamespace\n    // Node.isEqualNode() – https://developer.mozilla.org/en-US/docs/Web/API/Node/isEqualNode\n    // Node.isSameNode() – https://developer.mozilla.org/en-US/docs/Web/API/Node/isSameNode\n    // Node.lookupPrefix() – https://developer.mozilla.org/en-US/docs/Web/API/Node/lookupPrefix\n    // Node.lookupNamespaceURI() – https://developer.mozilla.org/en-US/docs/Web/API/Node/lookupNamespaceURI\n    // Node.normalize() – https://developer.mozilla.org/en-US/docs/Web/API/Node/normalize\n    // Implemented at Element/Text layer\n    // Node.nodeValue – https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeValue\n    // Node.cloneNode – https://developer.mozilla.org/en-US/docs/Web/API/Node/cloneNode\n    /**\n     * Getter returning the text representation of Element.childNodes.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/textContent\n     * @return text from all childNodes.\n     */\n    get textContent() {\n        return this.getTextContent();\n    }\n    /**\n     * Use `this.getTextContent()` instead of `super.textContent` to avoid incorrect or expensive ES5 transpilation.\n     */\n    getTextContent() {\n        let textContent = '';\n        const childNodes = this.childNodes;\n        if (childNodes.length) {\n            childNodes.forEach((childNode) => (textContent += childNode.textContent));\n            return textContent;\n        }\n        return '';\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/firstChild\n     * @return Node's first child in the tree, or null if the node has no children.\n     */\n    get firstChild() {\n        return this.childNodes[0] || null;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/lastChild\n     * @return The last child of a node, or null if there are no child elements.\n     */\n    get lastChild() {\n        return this.childNodes[this.childNodes.length - 1] || null;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/nextSibling\n     * @return node immediately following the specified one in it's parent's childNodes, or null if one doesn't exist.\n     */\n    get nextSibling() {\n        if (this.parentNode === null) {\n            return null;\n        }\n        const parentChildNodes = this.parentNode.childNodes;\n        return parentChildNodes[parentChildNodes.indexOf(this) + 1] || null;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/previousSibling\n     * @return node immediately preceding the specified one in its parent's childNodes, or null if the specified node is the first in that list.\n     */\n    get previousSibling() {\n        if (this.parentNode === null) {\n            return null;\n        }\n        const parentChildNodes = this.parentNode.childNodes;\n        return parentChildNodes[parentChildNodes.indexOf(this) - 1] || null;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/hasChildNodes\n     * @return boolean if the Node has childNodes.\n     */\n    hasChildNodes() {\n        return this.childNodes.length > 0;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/contains\n     * @param otherNode\n     * @return whether a Node is a descendant of a given Node\n     */\n    contains(otherNode) {\n        if (otherNode === this) {\n            return true;\n        }\n        if (this.childNodes.length > 0) {\n            if (this.childNodes.includes(this)) {\n                return true;\n            }\n            return this.childNodes.some((child) => child.contains(otherNode));\n        }\n        return false;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/insertBefore\n     * @param child\n     * @param referenceNode\n     * @return child after it has been inserted.\n     */\n    insertBefore(child, referenceNode) {\n        if (child === null || child === this) {\n            // The new child cannot contain the parent.\n            return child;\n        }\n        if (child.nodeType === 11 /* DOCUMENT_FRAGMENT_NODE */) {\n            child.childNodes.slice().forEach((node) => this.insertBefore(node, referenceNode));\n        }\n        else if (referenceNode == null) {\n            // When a referenceNode is not valid, appendChild(child).\n            return this.appendChild(child);\n        }\n        else if (this.childNodes.indexOf(referenceNode) >= 0) {\n            // Should only insertBefore direct children of this Node.\n            child.remove();\n            // Removing a child can cause this.childNodes to change, meaning we need to splice from its updated location.\n            this.childNodes.splice(this.childNodes.indexOf(referenceNode), 0, child);\n            this[56 /* insertedNode */](child);\n            mutate(this.ownerDocument, {\n                addedNodes: [child],\n                nextSibling: referenceNode,\n                type: 2 /* CHILD_LIST */,\n                target: this,\n            }, [\n                2 /* CHILD_LIST */,\n                this[7 /* index */],\n                referenceNode[7 /* index */],\n                0,\n                1,\n                0,\n                child[7 /* index */],\n            ]);\n            return child;\n        }\n        return null;\n    }\n    /**\n     * When a Node is inserted, this method is called (and can be extended by other classes)\n     * @param child\n     */\n    [(45 /* scopingRoot */, 7 /* index */, 9 /* transferredFormat */, 8 /* creationFormat */, _a = 10 /* handlers */, 56 /* insertedNode */)](child) {\n        child.parentNode = this;\n        propagate(child, 'isConnected', this.isConnected);\n        propagate(child, 45 /* scopingRoot */, this[45 /* scopingRoot */]);\n    }\n    /**\n     * When a node is removed, this method is called (and can be extended by other classes)\n     * @param child\n     */\n    [57 /* removedNode */](child) {\n        child.parentNode = null;\n        propagate(child, 'isConnected', false);\n        propagate(child, 45 /* scopingRoot */, child);\n    }\n    /**\n     * Adds the specified childNode argument as the last child to the current node.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/appendChild\n     * @param child Child Node to append to this Node.\n     * @return Node the appended node.\n     */\n    appendChild(child) {\n        if (child.nodeType === 11 /* DOCUMENT_FRAGMENT_NODE */) {\n            child.childNodes.slice().forEach(this.appendChild, this);\n        }\n        else {\n            child.remove();\n            this.childNodes.push(child);\n            this[56 /* insertedNode */](child);\n            const previousSibling = this.childNodes[this.childNodes.length - 2];\n            mutate(this.ownerDocument, {\n                addedNodes: [child],\n                previousSibling,\n                type: 2 /* CHILD_LIST */,\n                target: this,\n            }, [\n                2 /* CHILD_LIST */,\n                this[7 /* index */],\n                0,\n                previousSibling ? previousSibling[7 /* index */] : 0,\n                1,\n                0,\n                child[7 /* index */],\n            ]);\n        }\n        return child;\n    }\n    /**\n     * Removes a child node from the current element.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/removeChild\n     * @param child Child Node to remove from this Node.\n     * @return Node removed from the tree or null if the node wasn't attached to this tree.\n     */\n    removeChild(child) {\n        const index = this.childNodes.indexOf(child);\n        const exists = index >= 0;\n        if (exists) {\n            this.childNodes.splice(index, 1);\n            this[57 /* removedNode */](child);\n            mutate(this.ownerDocument, {\n                removedNodes: [child],\n                type: 2 /* CHILD_LIST */,\n                target: this,\n            }, [2 /* CHILD_LIST */, this[7 /* index */], 0, 0, 0, 1, child[7 /* index */]]);\n            return child;\n        }\n        return null;\n    }\n    /**\n     * @param newChild\n     * @param oldChild\n     * @return child that was replaced.\n     * @note `HierarchyRequestError` not handled e.g. newChild is an ancestor of current node.\n     * @see https://dom.spec.whatwg.org/#concept-node-replace\n     */\n    replaceChild(newChild, oldChild) {\n        if (newChild === oldChild ||\n            // In DOM, this throws DOMException: \"The node to be replaced is not a child of this node.\"\n            oldChild.parentNode !== this ||\n            // In DOM, this throws DOMException: \"The new child element contains the parent.\"\n            newChild.contains(this)) {\n            return oldChild;\n        }\n        // If newChild already exists in the DOM, it is first removed.\n        // TODO: Consider using a mutation-free API here to avoid two mutations\n        // per replaceChild() call.\n        newChild.remove();\n        const index = this.childNodes.indexOf(oldChild);\n        this.childNodes.splice(index, 1, newChild);\n        this[57 /* removedNode */](oldChild);\n        this[56 /* insertedNode */](newChild);\n        mutate(this.ownerDocument, {\n            addedNodes: [newChild],\n            removedNodes: [oldChild],\n            type: 2 /* CHILD_LIST */,\n            nextSibling: this.childNodes[index + 1],\n            target: this,\n        }, [\n            2 /* CHILD_LIST */,\n            this[7 /* index */],\n            this.childNodes[index + 1] ? this.childNodes[index + 1][7 /* index */] : 0,\n            0,\n            1,\n            1,\n            newChild[7 /* index */],\n            oldChild[7 /* index */],\n        ]);\n        return oldChild;\n    }\n    /**\n     * Removes this Node from the tree it belogs too.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/ChildNode/remove\n     */\n    remove() {\n        if (this.parentNode) {\n            this.parentNode.removeChild(this);\n        }\n    }\n    /**\n     * Add an event listener to callback when a specific event type is dispatched.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\n     * @param type Event Type (i.e 'click')\n     * @param handler Function called when event is dispatched.\n     */\n    addEventListener(type, handler, options = {}) {\n        const lowerType = toLower(type);\n        const storedType = storeString(lowerType);\n        const handlers = this[10 /* handlers */][lowerType];\n        let index = 0;\n        if (handlers) {\n            index = handlers.push(handler);\n        }\n        else {\n            this[10 /* handlers */][lowerType] = [handler];\n        }\n        transfer(this.ownerDocument, [\n            4 /* EVENT_SUBSCRIPTION */,\n            this[7 /* index */],\n            0,\n            1,\n            storedType,\n            index,\n            Number(Boolean(options.capture)),\n            Number(Boolean(options.once)),\n            Number(Boolean(options.passive)),\n            Number(Boolean(options.workerDOMPreventDefault)),\n        ]);\n    }\n    /**\n     * Remove a registered event listener for a specific event type.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/removeEventListener\n     * @param type Event Type (i.e 'click')\n     * @param handler Function to stop calling when event is dispatched.\n     */\n    removeEventListener(type, handler) {\n        const lowerType = toLower(type);\n        const handlers = this[10 /* handlers */][lowerType];\n        const index = !!handlers ? handlers.indexOf(handler) : -1;\n        if (index >= 0) {\n            handlers.splice(index, 1);\n            transfer(this.ownerDocument, [\n                4 /* EVENT_SUBSCRIPTION */,\n                this[7 /* index */],\n                1,\n                0,\n                storeString(lowerType),\n                index,\n            ]);\n        }\n    }\n    /**\n     * Dispatch an event for this Node.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/dispatchEvent\n     * @param event Event to dispatch to this node and potentially cascade to parents.\n     */\n    dispatchEvent(event) {\n        let target = (event.currentTarget = this);\n        let handlers;\n        let iterator;\n        do {\n            handlers = target && target[10 /* handlers */] && target[10 /* handlers */][toLower(event.type)];\n            if (handlers) {\n                for (iterator = handlers.length; iterator--;) {\n                    if ((handlers[iterator].call(target, event) === false || event[51 /* end */]) && event.cancelable) {\n                        break;\n                    }\n                }\n            }\n        } while (event.bubbles && !(event.cancelable && event[50 /* stop */]) && (target = target && target.parentNode));\n        return !event.defaultPrevented;\n    }\n}\n//# sourceMappingURL=Node.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Node } from './Node';\nimport { mutate } from '../MutationObserver';\nimport { store as storeString } from '../strings';\n// @see https://developer.mozilla.org/en-US/docs/Web/API/CharacterData\nexport class CharacterData extends Node {\n    constructor(data, nodeType, nodeName, ownerDocument, overrideIndex) {\n        super(nodeType, nodeName, ownerDocument, overrideIndex);\n        this[38 /* data */] = data;\n        this[8 /* creationFormat */] = [this[7 /* index */], nodeType, storeString(nodeName), storeString(data), 0];\n    }\n    // Unimplemented Methods\n    // NonDocumentTypeChildNode.nextElementSibling – https://developer.mozilla.org/en-US/docs/Web/API/NonDocumentTypeChildNode/nextElementSibling\n    // NonDocumentTypeChildNode.previousElementSibling – https://developer.mozilla.org/en-US/docs/Web/API/NonDocumentTypeChildNode/previousElementSibling\n    // CharacterData.appendData() – https://developer.mozilla.org/en-US/docs/Web/API/NonDocumentTypeChildNode/appendData\n    // CharacterData.deleteData() – https://developer.mozilla.org/en-US/docs/Web/API/NonDocumentTypeChildNode/deleteData\n    // CharacterData.insertData() – https://developer.mozilla.org/en-US/docs/Web/API/NonDocumentTypeChildNode/insertData\n    // CharacterData.replaceData() – https://developer.mozilla.org/en-US/docs/Web/API/NonDocumentTypeChildNode/replaceData\n    // CharacterData.substringData() – https://developer.mozilla.org/en-US/docs/Web/API/NonDocumentTypeChildNode/substringData\n    /**\n     * @return Returns the string contained in private CharacterData.data\n     */\n    get data() {\n        return this[38 /* data */];\n    }\n    /**\n     * @param value string value to store as CharacterData.data.\n     */\n    set data(value) {\n        const oldValue = this.data;\n        this[38 /* data */] = value;\n        mutate(this.ownerDocument, {\n            target: this,\n            type: 1 /* CHARACTER_DATA */,\n            value,\n            oldValue,\n        }, [1 /* CHARACTER_DATA */, this[7 /* index */], storeString(value)]);\n    }\n    /**\n     * @return Returns the size of the string contained in CharacterData.data\n     */\n    get length() {\n        return this[38 /* data */].length;\n    }\n    /**\n     * @return Returns the string contained in CharacterData.data\n     */\n    get nodeValue() {\n        return this[38 /* data */];\n    }\n    /**\n     * @param value string value to store as CharacterData.data.\n     */\n    set nodeValue(value) {\n        this.data = value;\n    }\n}\n38 /* data */;\n//# sourceMappingURL=CharacterData.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { CharacterData } from './CharacterData';\n// @see https://developer.mozilla.org/en-US/docs/Web/API/Comment\nexport class Comment extends CharacterData {\n    constructor(data, ownerDocument, overrideIndex) {\n        super(data, 8 /* COMMENT_NODE */, '#comment', ownerDocument, overrideIndex);\n    }\n    /**\n     * textContent getter, retrieves underlying CharacterData data.\n     * This is a different implmentation than DOMv1-4 APIs, but should be transparent to Frameworks.\n     */\n    get textContent() {\n        return this.data;\n    }\n    /**\n     * textContent setter, mutates underlying CharacterData data.\n     * This is a different implmentation than DOMv1-4 APIs, but should be transparent to Frameworks.\n     * @param value new value\n     */\n    set textContent(value) {\n        // Mutation Observation is performed by CharacterData.\n        this.nodeValue = value;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/cloneNode\n     * @return new Comment Node with the same data as the Comment to clone.\n     */\n    cloneNode() {\n        return this.ownerDocument.createComment(this.data);\n    }\n}\n//# sourceMappingURL=Comment.js.map","/**\n * Copyright 2020 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst ALLOWLISTED_GLOBALS = {\n    Array: true,\n    ArrayBuffer: true,\n    BigInt: true,\n    BigInt64Array: true,\n    BigUint64Array: true,\n    Boolean: true,\n    Cache: true,\n    CustomEvent: true,\n    DataView: true,\n    Date: true,\n    Error: true,\n    EvalError: true,\n    Event: true,\n    EventTarget: true,\n    Float32Array: true,\n    Float64Array: true,\n    Function: true,\n    Infinity: true,\n    Int16Array: true,\n    Int32Array: true,\n    Int8Array: true,\n    Intl: true,\n    JSON: true,\n    Map: true,\n    Math: true,\n    NaN: true,\n    Number: true,\n    Object: true,\n    Promise: true,\n    Proxy: true,\n    RangeError: true,\n    ReferenceError: true,\n    Reflect: true,\n    RegExp: true,\n    Set: true,\n    String: true,\n    Symbol: true,\n    SyntaxError: true,\n    TextDecoder: true,\n    TextEncoder: true,\n    TypeError: true,\n    URIError: true,\n    URL: true,\n    Uint16Array: true,\n    Uint32Array: true,\n    Uint8Array: true,\n    Uint8ClampedArray: true,\n    WeakMap: true,\n    WeakSet: true,\n    WebAssembly: true,\n    WebSocket: true,\n    XMLHttpRequest: true,\n    atob: true,\n    addEventListener: true,\n    removeEventListener: true,\n    btoa: true,\n    caches: true,\n    clearInterval: true,\n    clearTimeout: true,\n    console: true,\n    decodeURI: true,\n    decodeURIComponent: true,\n    document: true,\n    encodeURI: true,\n    encodeURIComponent: true,\n    escape: true,\n    fetch: true,\n    indexedDB: true,\n    isFinite: true,\n    isNaN: true,\n    location: true,\n    navigator: true,\n    onerror: true,\n    onrejectionhandled: true,\n    onunhandledrejection: true,\n    parseFloat: true,\n    parseInt: true,\n    performance: true,\n    requestAnimationFrame: true,\n    cancelAnimationFrame: true,\n    self: true,\n    setTimeout: true,\n    setInterval: true,\n    unescape: true,\n};\n// Modify global scope by removing disallowed properties.\nexport function deleteGlobals(global) {\n    /**\n     * @param object\n     * @param property\n     * @return True if property was deleted from object. Otherwise, false.\n     */\n    const deleteUnsafe = (object, property) => {\n        if (!ALLOWLISTED_GLOBALS.hasOwnProperty(property)) {\n            try {\n                delete object[property];\n                return true;\n            }\n            catch (e) { }\n        }\n        return false;\n    };\n    // Walk up global's prototype chain and dereference non-allowlisted properties\n    // until EventTarget is reached.\n    let current = global;\n    while (current && current.constructor !== EventTarget) {\n        const deleted = [];\n        const failedToDelete = [];\n        Object.getOwnPropertyNames(current).forEach((prop) => {\n            if (deleteUnsafe(current, prop)) {\n                deleted.push(prop);\n            }\n            else {\n                failedToDelete.push(prop);\n            }\n        });\n        console.info(`Removed ${deleted.length} references from`, current, ':', deleted);\n        if (failedToDelete.length) {\n            console.info(`Failed to remove ${failedToDelete.length} references from`, current, ':', failedToDelete);\n        }\n        current = Object.getPrototypeOf(current);\n    }\n}\n//# sourceMappingURL=delete-globals.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { toLower, toUpper } from '../../utils';\n// To future authors: It would be great if we could enforce that elements are not modified by a ConditionPredicate.\nexport const tagNameConditionPredicate = (tagNames) => (element) => {\n    console.assert(tagNames.every((t) => t === toUpper(t)), 'tagNames must be all uppercase.');\n    return tagNames.includes(element.tagName);\n};\nexport const elementPredicate = (node) => node.nodeType === 1 /* ELEMENT_NODE */;\nexport const matchChildrenElements = (node, conditionPredicate) => {\n    const matchingElements = [];\n    node.childNodes.forEach((child) => {\n        if (elementPredicate(child)) {\n            if (conditionPredicate(child)) {\n                matchingElements.push(child);\n            }\n            matchingElements.push(...matchChildrenElements(child, conditionPredicate));\n        }\n    });\n    return matchingElements;\n};\nexport const matchChildElement = (element, conditionPredicate) => {\n    let returnValue = null;\n    element.children.some((child) => {\n        if (conditionPredicate(child)) {\n            returnValue = child;\n            return true;\n        }\n        const grandChildMatch = matchChildElement(child, conditionPredicate);\n        if (grandChildMatch !== null) {\n            returnValue = grandChildMatch;\n            return true;\n        }\n        return false;\n    });\n    return returnValue;\n};\nexport const matchNearestParent = (element, conditionPredicate) => {\n    while ((element = element.parentNode)) {\n        if (conditionPredicate(element)) {\n            return element;\n        }\n    }\n    return null;\n};\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/Attribute_selectors\n * @param attrSelector the selector we are trying to match for.\n * @param element the element being tested.\n * @return boolean for whether we match the condition\n */\nexport const matchAttrReference = (attrSelector, element) => {\n    if (!attrSelector) {\n        return false;\n    }\n    const equalPos = attrSelector.indexOf('=');\n    const selectorLength = attrSelector.length;\n    const caseInsensitive = attrSelector.charAt(selectorLength - 2) === 'i';\n    const endPos = caseInsensitive ? selectorLength - 3 : selectorLength - 1;\n    if (equalPos !== -1) {\n        const equalSuffix = attrSelector.charAt(equalPos - 1);\n        const possibleSuffixes = ['~', '|', '$', '^', '*'];\n        const attrString = possibleSuffixes.includes(equalSuffix) ? attrSelector.substring(1, equalPos - 1) : attrSelector.substring(1, equalPos);\n        const rawValue = attrSelector.substring(equalPos + 1, endPos);\n        const rawAttrValue = element.getAttribute(attrString);\n        if (rawAttrValue) {\n            const casedValue = caseInsensitive ? toLower(rawValue) : rawValue;\n            const casedAttrValue = caseInsensitive ? toLower(rawAttrValue) : rawAttrValue;\n            switch (equalSuffix) {\n                case '~':\n                    return casedAttrValue.split(' ').indexOf(casedValue) !== -1;\n                case '|':\n                    return casedAttrValue === casedValue || casedAttrValue === `${casedValue}-`;\n                case '^':\n                    return casedAttrValue.startsWith(casedValue);\n                case '$':\n                    return casedAttrValue.endsWith(casedValue);\n                case '*':\n                    return casedAttrValue.indexOf(casedValue) !== -1;\n                default:\n                    return casedAttrValue === casedValue;\n            }\n        }\n        return false;\n    }\n    else {\n        return element.hasAttribute(attrSelector.substring(1, endPos));\n    }\n};\n//# sourceMappingURL=matchElements.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { elementPredicate, matchAttrReference, matchChildrenElements } from './matchElements';\nimport { Node } from './Node';\nimport { containsIndexOf, toLower } from '../../utils';\n/*\nNormally ParentNode is implemented as a mixin, but since the Node class is an abstract\nthis makes it hard to build a mixin that recieves a base of the representations of Node needing\nthe mixed in functionality.\n\n// Partially implemented Mixin Methods\n// Both Element.querySelector() and Element.querySelector() are only implemented for the following simple selectors:\n// - Element selectors\n// - ID selectors\n// - Class selectors\n// - Attribute selectors\n// Element.querySelector() – https://developer.mozilla.org/en-US/docs/Web/API/Element/querySelector\n// Element.querySelectorAll() – https://developer.mozilla.org/en-US/docs/Web/API/Element/querySelectorAll\n*/\nexport class ParentNode extends Node {\n    /**\n     * Getter returning children of an Element that are Elements themselves.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/ParentNode/children\n     * @return Element objects that are children of this ParentNode, omitting all of its non-element nodes.\n     */\n    get children() {\n        return this.childNodes.filter(elementPredicate);\n    }\n    /**\n     * Getter returning the number of child elements of a Element.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/ParentNode/childElementCount\n     * @return number of child elements of the given Element.\n     */\n    get childElementCount() {\n        return this.children.length;\n    }\n    /**\n     * Getter returning the first Element in Element.childNodes.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/ParentNode/firstElementChild\n     * @return first childNode that is also an element.\n     */\n    get firstElementChild() {\n        return this.childNodes.find(elementPredicate) || null;\n    }\n    /**\n     * Getter returning the last Element in Element.childNodes.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/ParentNode/lastElementChild\n     * @return first childNode that is also an element.\n     */\n    get lastElementChild() {\n        const children = this.children;\n        return children[children.length - 1] || null;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/querySelector\n     * @param selector the selector we are trying to match for.\n     * @return Element with matching selector.\n     */\n    querySelector(selector) {\n        const matches = querySelectorAll(this, selector);\n        return matches ? matches[0] : null;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/querySelectorAll\n     * @param selector the selector we are trying to match for.\n     * @return Elements with matching selector.\n     */\n    querySelectorAll(selector) {\n        return querySelectorAll(this, selector);\n    }\n}\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/querySelector\n * @param node the node to filter results under.\n * @param selector the selector we are trying to match for.\n * @return Element with matching selector.\n */\nfunction querySelectorAll(node, selector) {\n    // As per spec: https://dom.spec.whatwg.org/#scope-match-a-selectors-string\n    // First, parse the selector\n    const selectorBracketIndexes = [selector.indexOf('['), selector.indexOf(']')];\n    const selectorHasAttr = containsIndexOf(selectorBracketIndexes[0]) && containsIndexOf(selectorBracketIndexes[1]);\n    const elementSelector = selectorHasAttr ? selector.substring(0, selectorBracketIndexes[0]) : selector;\n    const attrSelector = selectorHasAttr ? selector.substring(selectorBracketIndexes[0], selectorBracketIndexes[1] + 1) : null;\n    // TODO(nainar): Parsing selectors is needed when we add in more complex selectors.\n    // Second, find all the matching elements on the Document\n    let matcher;\n    if (selector[0] === '[') {\n        matcher = (element) => matchAttrReference(selector, element);\n    }\n    else if (elementSelector[0] === '#') {\n        matcher = selectorHasAttr\n            ? (element) => element.id === elementSelector.substr(1) && matchAttrReference(attrSelector, element)\n            : (element) => element.id === elementSelector.substr(1);\n    }\n    else if (elementSelector[0] === '.') {\n        matcher = selectorHasAttr\n            ? (element) => element.classList.contains(elementSelector.substr(1)) && matchAttrReference(attrSelector, element)\n            : (element) => element.classList.contains(elementSelector.substr(1));\n    }\n    else {\n        matcher = selectorHasAttr\n            ? (element) => element.localName === toLower(elementSelector) && matchAttrReference(attrSelector, element)\n            : (element) => element.localName === toLower(elementSelector);\n    }\n    // Third, filter to return elements that exist within the querying element's descendants.\n    return matcher\n        ? matchChildrenElements(node[45 /* scopingRoot */], matcher).filter((element) => node !== element && node.contains(element))\n        : [];\n}\n//# sourceMappingURL=ParentNode.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a;\nimport { mutate } from '../MutationObserver';\nimport { store as storeString } from '../strings';\nconst WHITESPACE_REGEX = /\\s/;\n/**\n * Synchronizes the string getter/setter with the actual DOMTokenList instance.\n * @param defineOn Element or class extension to define getter/setter pair for token list access.\n * @param accessorKey Key used to access DOMTokenList directly from specific element.\n * @param propertyName Key used to access DOMTokenList as string getter/setter.\n */\nexport function synchronizedAccessor(defineOn, accessorKey, propertyName) {\n    Object.defineProperty(defineOn.prototype, propertyName, {\n        enumerable: true,\n        configurable: true,\n        get() {\n            return this[accessorKey].value;\n        },\n        set(value) {\n            this[accessorKey].value = value;\n        },\n    });\n}\nexport class DOMTokenList {\n    /**\n     * The DOMTokenList interface represents a set of space-separated tokens.\n     * It is indexed beginning with 0 as with JavaScript Array objects and is case-sensitive.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList\n     * @param target Specific Element instance to modify when value is changed.\n     * @param attributeName Name of the attribute used by Element to access DOMTokenList.\n     */\n    constructor(target, attributeName) {\n        this[_a] = [];\n        this[13 /* target */] = target;\n        this[18 /* attributeName */] = attributeName;\n        this[44 /* storeAttribute */] = target[44 /* storeAttribute */].bind(target);\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList/value\n     * @return string representation of tokens (space delimitted).\n     */\n    get value() {\n        return this[43 /* tokens */].join(' ');\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList/length\n     * @return integer representing the number of objects stored in the object.\n     */\n    get length() {\n        return this[43 /* tokens */].length;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList/value\n     * @param collection String of values space delimited to replace the current DOMTokenList with.\n     */\n    set value(collection) {\n        const oldValue = this.value;\n        const newValue = collection.trim();\n        // Replace current tokens with new tokens.\n        this[43 /* tokens */].splice(0, this[43 /* tokens */].length, ...(newValue !== '' ? newValue.split(/\\s+/) : ''));\n        this[67 /* mutated */](oldValue, newValue);\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList/item\n     * @param index number from DOMTokenList entities to retrieve value of\n     * @return value stored at the index requested, or undefined if beyond known range.\n     */\n    item(index) {\n        return this[43 /* tokens */][index];\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList/contains\n     * @param token value the DOMTokenList is tested for.\n     * @return boolean indicating if the token is contained by the DOMTokenList.\n     */\n    contains(token) {\n        return this[43 /* tokens */].includes(token);\n    }\n    /**\n     * Add a token or tokens to the list.\n     * Note: All duplicates are removed, and the first token's position with the value is preserved.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList/add\n     * @param tokens each token is a string to add to a TokenList.\n     */\n    add(...tokens) {\n        const oldValue = this.value;\n        this[43 /* tokens */].splice(0, this[43 /* tokens */].length, ...new Set(this[43 /* tokens */].concat(tokens)));\n        this[67 /* mutated */](oldValue, this.value);\n    }\n    /**\n     * Remove a token or tokens from the list.\n     * Note: All duplicates are removed, and the first token's position with the value is preserved.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList/remove\n     * @param tokens each token is a string to remove from a TokenList.\n     */\n    remove(...tokens) {\n        const oldValue = this.value;\n        this[43 /* tokens */].splice(0, this[43 /* tokens */].length, ...new Set(this[43 /* tokens */].filter((token) => !tokens.includes(token))));\n        this[67 /* mutated */](oldValue, this.value);\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList/replace\n     * @param token\n     * @param newToken\n     */\n    replace(token, newToken) {\n        if (!this[43 /* tokens */].includes(token)) {\n            return;\n        }\n        const oldValue = this.value;\n        const set = new Set(this[43 /* tokens */]);\n        if (token !== newToken) {\n            set.delete(token);\n            if (newToken !== '') {\n                set.add(newToken);\n            }\n        }\n        this[43 /* tokens */].splice(0, this[43 /* tokens */].length, ...set);\n        this[67 /* mutated */](oldValue, this.value);\n    }\n    /**\n     * Adds or removes a token based on its presence in the token list.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList/toggle\n     * @param token string to add or remove from the token list\n     * @param force changes toggle into a one way-only operation. true => token added. false => token removed.\n     * @return true if the token is in the list following mutation, false if not.\n     */\n    toggle(token, force) {\n        if (WHITESPACE_REGEX.test(token)) {\n            throw new TypeError('Uncaught DOMException');\n        }\n        if (!this[43 /* tokens */].includes(token)) {\n            if (force === undefined || !!force) {\n                // Note, this will add the token if force is undefined (not passed into the method), or truthy.\n                this.add(token);\n            }\n            return true;\n        }\n        else if (!force) {\n            // Note, this will remove the token if force is undefined (not passed into the method), or falsey.\n            this.remove(token);\n            return false;\n        }\n        return true;\n    }\n    /**\n     * Report tokenList mutations to MutationObserver.\n     * @param oldValue value before mutation\n     * @param value value after mutation\n     * @private\n     */\n    [(_a = 43 /* tokens */, 13 /* target */, 18 /* attributeName */, 44 /* storeAttribute */, 67 /* mutated */)](oldValue, value) {\n        this[44 /* storeAttribute */](this[13 /* target */].namespaceURI, this[18 /* attributeName */], value);\n        mutate(this[13 /* target */].ownerDocument, {\n            type: 0 /* ATTRIBUTES */,\n            target: this[13 /* target */],\n            attributeName: this[18 /* attributeName */],\n            value,\n            oldValue,\n        }, [\n            0 /* ATTRIBUTES */,\n            this[13 /* target */][7 /* index */],\n            storeString(this[18 /* attributeName */]),\n            0,\n            value !== null ? storeString(value) + 1 : 0,\n        ]);\n    }\n}\n//# sourceMappingURL=DOMTokenList.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { keyValueString } from '../../utils';\nexport const toString = (attributes) => attributes.map((attr) => keyValueString(attr.name, attr.value)).join(' ');\nexport const matchPredicate = (namespaceURI, name) => (attr) => attr.namespaceURI === namespaceURI && attr.name === name;\n//# sourceMappingURL=Attr.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a;\nimport { mutate } from '../MutationObserver';\nimport { toLower } from '../../utils';\nimport { store as storeString } from '../strings';\nconst hyphenateKey = (key) => toLower(key.replace(/(webkit|ms|moz|khtml)/g, '-$1').replace(/([a-zA-Z])(?=[A-Z])/g, '$1-'));\nexport const appendKeys = (keys) => {\n    const keysToAppend = keys.filter((key) => isNaN(key) && !CSSStyleDeclaration.prototype.hasOwnProperty(key));\n    if (keysToAppend.length <= 0) {\n        return;\n    }\n    const previousPrototypeLength = (CSSStyleDeclaration.prototype.length || 0);\n    if (previousPrototypeLength !== 0) {\n        CSSStyleDeclaration.prototype.length = previousPrototypeLength + keysToAppend.length;\n    }\n    else {\n        Object.defineProperty(CSSStyleDeclaration.prototype, 'length', {\n            configurable: true,\n            writable: true,\n            value: keysToAppend.length,\n        });\n    }\n    keysToAppend.forEach((key, index) => {\n        const hyphenatedKey = hyphenateKey(key);\n        CSSStyleDeclaration.prototype[index + previousPrototypeLength] = hyphenatedKey;\n        Object.defineProperties(CSSStyleDeclaration.prototype, {\n            [key]: {\n                get() {\n                    return this.getPropertyValue(hyphenatedKey);\n                },\n                set(value) {\n                    this.setProperty(hyphenatedKey, value);\n                },\n            },\n        });\n    });\n};\nexport class CSSStyleDeclaration {\n    constructor(target) {\n        this[_a] = {};\n        this[44 /* storeAttribute */] = target[44 /* storeAttribute */].bind(target);\n        this[13 /* target */] = target;\n    }\n    /**\n     * Retrieve the value for a given property key.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleDeclaration/getPropertyValue\n     * @param key the name of the property to retrieve the value for.\n     * @return value stored for the provided key.\n     */\n    getPropertyValue(key) {\n        return this[3 /* properties */][key] || '';\n    }\n    /**\n     * Remove a value for a given property key.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleDeclaration/removeProperty\n     * @param key the name of the property to retrieve the value for.\n     * @return previously stored value for the provided key.\n     */\n    removeProperty(key) {\n        const oldValue = this.getPropertyValue(key);\n        this[3 /* properties */][key] = null;\n        this.mutated(this.cssText);\n        return oldValue;\n    }\n    /**\n     * Stores a given value for the provided key.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleDeclaration/setProperty\n     * @param key modify this key\n     * @param value store this value\n     */\n    setProperty(key, value) {\n        this[3 /* properties */][key] = value;\n        this.mutated(this.cssText);\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleDeclaration/cssText\n     * @return css text string representing known and valid style declarations.\n     */\n    get cssText() {\n        let value;\n        let returnValue = '';\n        for (const key in this[3 /* properties */]) {\n            if ((value = this.getPropertyValue(key)) !== '') {\n                returnValue += `${key}: ${value}; `;\n            }\n        }\n        return returnValue.trim();\n    }\n    /**\n     * Replace all style declarations with new values parsed from a cssText string.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleDeclaration/cssText\n     * @param value css text string to parse and store\n     */\n    set cssText(value) {\n        // value should have an \"unknown\" type but get/set can't have different types.\n        // https://github.com/Microsoft/TypeScript/issues/2521\n        const stringValue = typeof value === 'string' ? value : '';\n        this[3 /* properties */] = {};\n        const values = stringValue.split(/[:;]/);\n        const length = values.length;\n        for (let index = 0; index + 1 < length; index += 2) {\n            this[3 /* properties */][toLower(values[index].trim())] = values[index + 1].trim();\n        }\n        this.mutated(this.cssText);\n    }\n    /**\n     * Report CSSStyleDeclaration mutations to MutationObserver.\n     * @param value value after mutation\n     * @private\n     * // TODO(KB): Write a test to ensure mutations are fired for CSSStyleDeclaration changes.\n     */\n    mutated(value) {\n        const oldValue = this[44 /* storeAttribute */](this[13 /* target */].namespaceURI, 'style', value);\n        mutate(this[13 /* target */].ownerDocument, {\n            type: 0 /* ATTRIBUTES */,\n            target: this[13 /* target */],\n            attributeName: 'style',\n            value,\n            oldValue,\n        }, [\n            0 /* ATTRIBUTES */,\n            this[13 /* target */][7 /* index */],\n            storeString('style'),\n            0,\n            value !== null ? storeString(value) + 1 : 0,\n        ]);\n    }\n}\n_a = 3 /* properties */, 44 /* storeAttribute */, 13 /* target */;\n//# sourceMappingURL=CSSStyleDeclaration.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { toLower } from '../../utils';\n// TODO: Do all boolean attributes have boolean properties?\n// TODO: Do enumerated attributes with non-boolean properties exist?\nexport const reflectProperties = (properties, defineOn) => {\n    properties.forEach((pair) => {\n        for (const property in pair) {\n            const { 0: defaultValue, 1: attributeName = toLower(property), 2: keywords } = pair[property];\n            // Boolean attributes only care about presence, not attribute value.\n            // https://html.spec.whatwg.org/multipage/common-microsyntaxes.html#boolean-attributes\n            const isBooleanAttribute = typeof defaultValue === 'boolean';\n            Object.defineProperty(defineOn.prototype, property, {\n                enumerable: true,\n                get() {\n                    const element = this;\n                    const attributeValue = element.getAttribute(attributeName);\n                    if (keywords) {\n                        return element.hasAttribute(attributeName) ? attributeValue === keywords[0] : defaultValue;\n                    }\n                    if (isBooleanAttribute) {\n                        return element.hasAttribute(attributeName);\n                    }\n                    const castableValue = attributeValue || defaultValue;\n                    return typeof defaultValue === 'number' ? Number(castableValue) : String(castableValue);\n                },\n                set(value) {\n                    const element = this;\n                    if (keywords) {\n                        element.setAttribute(attributeName, value ? keywords[0] : keywords[1]);\n                    }\n                    else if (isBooleanAttribute) {\n                        value ? element.setAttribute(attributeName, '') : element.removeAttribute(attributeName);\n                    }\n                    else {\n                        element.setAttribute(attributeName, String(value));\n                    }\n                },\n            });\n        }\n    });\n};\n//# sourceMappingURL=enhanceElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport const HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\nexport const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\n//# sourceMappingURL=TransferrableNodes.js.map","import { SVG_NAMESPACE, HTML_NAMESPACE } from '../../transfer/TransferrableNodes';\nimport { toLower, toUpper } from '../../utils';\nfunction arr_back(arr) {\n    return arr[arr.length - 1];\n}\n// https://html.spec.whatwg.org/multipage/custom-elements.html#valid-custom-element-name\nconst kMarkupPattern = /<!--([^]*)-->|<(\\/?)([a-z][-.0-9_a-z]*)([^>]*?)(\\/?)>/gi;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\nconst kAttributePattern = /(^|\\s)([^\\s\"'>\\/=]+)\\s*=\\s*(\"([^\"]+)\"|'([^']+)'|(\\S+))/gi;\nconst kSelfClosingElements = {\n    AREA: true,\n    BASE: true,\n    BR: true,\n    COL: true,\n    HR: true,\n    IMG: true,\n    INPUT: true,\n    LINK: true,\n    META: true,\n    PARAM: true,\n    SOURCE: true,\n    TRACK: true,\n    WBR: true,\n};\nconst kElementsClosedByOpening = {\n    LI: { LI: true },\n    DT: { DT: true, DD: true },\n    DD: { DD: true, DT: true },\n    P: {\n        ADDRESS: true,\n        ARTICLE: true,\n        ASIDE: true,\n        BLOCKQUOTE: true,\n        DETAILS: true,\n        DIV: true,\n        DL: true,\n        FIELDSET: true,\n        FIGCAPTION: true,\n        FIGURE: true,\n        FOOTER: true,\n        FORM: true,\n        H1: true,\n        H2: true,\n        H3: true,\n        H4: true,\n        H5: true,\n        H6: true,\n        HEADER: true,\n        HR: true,\n        MAIN: true,\n        NAV: true,\n        OL: true,\n        P: true,\n        PRE: true,\n        SECTION: true,\n        TABLE: true,\n        UL: true,\n    },\n    RT: { RT: true, RP: true },\n    RP: { RT: true, RP: true },\n    OPTGROUP: { OPTGROUP: true },\n    OPTION: { OPTION: true, OPTGROUP: true },\n    THEAD: { TBODY: true, TFOOT: true },\n    TBODY: { TBODY: true, TFOOT: true },\n    TR: { TR: true },\n    TD: { TD: true, TH: true },\n    TH: { TD: true, TH: true },\n};\nconst kElementsClosedByClosing = {\n    LI: { UL: true, OL: true },\n    A: { DIV: true },\n    B: { DIV: true },\n    I: { DIV: true },\n    P: { DIV: true },\n    TD: { TR: true, TABLE: true },\n    TH: { TR: true, TABLE: true },\n};\nconst kBlockTextElements = {\n    SCRIPT: true,\n    NOSCRIPT: true,\n    STYLE: true,\n    PRE: true,\n};\n/**\n * Parses HTML and returns a root element\n * Parse a chuck of HTML source.\n * @param  {string} data HTML in string format.\n * @param {!Element} root The element to use as root.\n * @return {Element}      root element\n */\nexport function parse(data, rootElement) {\n    const ownerDocument = rootElement.ownerDocument;\n    const root = ownerDocument.createElementNS(rootElement.namespaceURI, rootElement.localName);\n    let currentParent = root;\n    let currentNamespace = root.namespaceURI;\n    const stack = [root];\n    let lastTextPos = 0;\n    let match;\n    data = '<q>' + data + '</q>';\n    const tagsClosed = [];\n    if (currentNamespace !== SVG_NAMESPACE && currentNamespace !== HTML_NAMESPACE) {\n        throw new Error('Namespace not supported: ' + currentNamespace);\n    }\n    while ((match = kMarkupPattern.exec(data))) {\n        const commentContents = match[1]; // <!--contents-->\n        const beginningSlash = match[2]; // ... </ ...\n        const tagName = match[3];\n        const matchAttributes = match[4];\n        const endSlash = match[5]; // ... /> ...\n        if (lastTextPos < match.index) {\n            // if has content\n            const text = data.slice(lastTextPos, match.index);\n            currentParent.appendChild(ownerDocument.createTextNode(decodeEntities(text)));\n        }\n        lastTextPos = kMarkupPattern.lastIndex;\n        if (commentContents !== undefined) {\n            // this is a comment\n            currentParent.appendChild(ownerDocument.createComment(commentContents));\n            continue;\n        }\n        const normalizedTagName = toUpper(tagName);\n        if (normalizedTagName === 'SVG') {\n            currentNamespace = beginningSlash ? HTML_NAMESPACE : SVG_NAMESPACE;\n        }\n        if (!beginningSlash) {\n            // not </ tags\n            if (!endSlash && kElementsClosedByOpening[currentParent.tagName]) {\n                if (kElementsClosedByOpening[currentParent.tagName][normalizedTagName]) {\n                    stack.pop();\n                    currentParent = arr_back(stack);\n                }\n            }\n            const childToAppend = ownerDocument.createElementNS(currentNamespace, currentNamespace === HTML_NAMESPACE ? toLower(tagName) : tagName);\n            for (let attMatch; (attMatch = kAttributePattern.exec(matchAttributes));) {\n                const attrName = attMatch[2];\n                const attrValue = attMatch[4] || attMatch[5] || attMatch[6];\n                childToAppend.setAttribute(attrName, attrValue);\n            }\n            currentParent = currentParent.appendChild(childToAppend);\n            stack.push(currentParent);\n            if (kBlockTextElements[normalizedTagName]) {\n                // a little test to find next </script> or </style> ...\n                const closeMarkup = '</' + toLower(normalizedTagName) + '>';\n                const index = data.indexOf(closeMarkup, kMarkupPattern.lastIndex);\n                if (index == -1) {\n                    throw new Error('Close markup not found.');\n                }\n                else {\n                    kMarkupPattern.lastIndex = index;\n                }\n            }\n        }\n        if (tagName === 'foreignObject') {\n            currentNamespace = beginningSlash ? SVG_NAMESPACE : HTML_NAMESPACE;\n        }\n        if (beginningSlash || endSlash || kSelfClosingElements[normalizedTagName]) {\n            // </ or /> or <br> etc.\n            while (true) {\n                if (stack.length <= 1) {\n                    break;\n                }\n                if (toUpper(currentParent.nodeName) == normalizedTagName) {\n                    stack.pop();\n                    currentParent = arr_back(stack);\n                    break;\n                }\n                else {\n                    // Trying to close current tag, and move on\n                    if (kElementsClosedByClosing[currentParent.tagName]) {\n                        if (kElementsClosedByClosing[currentParent.tagName][normalizedTagName]) {\n                            stack.pop();\n                            currentParent = arr_back(stack);\n                            continue;\n                        }\n                    }\n                    // Use aggressive strategy to handle unmatching markups.\n                    break;\n                }\n            }\n        }\n    }\n    for (const node of stack) {\n        if (tagsClosed[tagsClosed.length - 1] == node.nodeName) {\n            stack.pop();\n            tagsClosed.pop();\n            currentParent = arr_back(stack);\n        }\n        else\n            break;\n    }\n    const valid = stack.length === 1;\n    if (!valid) {\n        throw new Error('Attempting to parse invalid HTML content.');\n    }\n    const wrapper = root.firstChild;\n    if (wrapper) {\n        wrapper.parentNode = null;\n        wrapper.childNodes.forEach((node) => {\n            node.parentNode = null;\n        });\n        return wrapper;\n    }\n    throw new Error('Attempting to parse invalid HTML.');\n}\n/**\n * Decodes HTML Entities.\n * Currently only works for numeric entities, as well as the 4 named entities\n * required for encoding HTML: &, \", <, >.\n * See https://developer.mozilla.org/en-US/docs/Glossary/Entity.\n *\n * TODO: create solution for other named entities.\n */\nconst RESERVED_CHARACTERS = {\n    __proto__: null,\n    amp: '&',\n    lt: '<',\n    gt: '>',\n    quot: '\"',\n};\nfunction decodeEntities(html) {\n    return html.replace(/&(?:(#x?[\\da-f]+)|([\\w]+));?/gi, function (s, numericEntity, namedEntity) {\n        // Numeric entity\n        if (numericEntity) {\n            let code = numericEntity.charAt(1).toLowerCase() === 'x' ? parseInt(numericEntity.substr(2), 16) : parseInt(numericEntity.substr(1), 10);\n            // 1114111 is the largest valid unicode codepoint.\n            if (isNaN(code) || code > 1114111) {\n                return s;\n            }\n            return String.fromCodePoint(code) || s;\n        }\n        // Named entity. Only HTML reserved entities are currently supported.\n        if (namedEntity) {\n            return RESERVED_CHARACTERS[namedEntity.toLowerCase()] || s;\n        }\n        return s;\n    });\n}\n//# sourceMappingURL=html-parser.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a, _b;\nimport { get } from './nodes';\nexport class Event {\n    constructor(type, opts) {\n        this[_a] = false;\n        this[_b] = false;\n        this.type = type;\n        this.bubbles = !!opts.bubbles;\n        this.cancelable = !!opts.cancelable;\n    }\n    stopPropagation() {\n        this[50 /* stop */] = true;\n    }\n    stopImmediatePropagation() {\n        this[51 /* end */] = this[50 /* stop */] = true;\n    }\n    preventDefault() {\n        this.defaultPrevented = true;\n    }\n    /** Event.initEvent() is deprecated but supported here for legacy usage.  */\n    initEvent(type, bubbles, cancelable) {\n        this.type = type;\n        this.bubbles = bubbles;\n        this.cancelable = cancelable;\n    }\n}\n_a = 50 /* stop */, _b = 51 /* end */;\n/**\n * Determine the target for a TransferrableEvent.\n * @param document Event intended within the scope of this document.\n * @param event\n */\nconst targetFromTransfer = (document, event) => {\n    if (event[13 /* target */] !== null) {\n        const index = event[13 /* target */][0];\n        // If the target was sent as index 0, use the current document.\n        return get(index !== 0 ? index : document[7 /* index */]);\n    }\n    return null;\n};\n/**\n *\n * @param document\n * @param event\n */\nconst touchListFromTransfer = (document, event, key) => {\n    if (event[key] !== undefined) {\n        const touchListKeys = Object.keys(event[key]);\n        const list = {\n            length: touchListKeys.length,\n            item(index) {\n                return this[index] || null;\n            },\n        };\n        touchListKeys.forEach((touchListKey) => {\n            const numericKey = Number(touchListKey);\n            const transferredTouch = event[key][numericKey];\n            list[numericKey] = {\n                identifier: transferredTouch[0],\n                screenX: transferredTouch[1],\n                screenY: transferredTouch[2],\n                clientX: transferredTouch[3],\n                clientY: transferredTouch[4],\n                pageX: transferredTouch[5],\n                pageY: transferredTouch[6],\n                target: get(transferredTouch[7] !== 0 ? transferredTouch[7] : document[7 /* index */]),\n            };\n        });\n        return list;\n    }\n    return undefined;\n};\n/**\n * When an event is dispatched from the main thread, it needs to be propagated in the worker thread.\n * Propagate adds an event listener to the worker global scope and uses the WorkerDOM Node.dispatchEvent\n * method to dispatch the transfered event in the worker thread.\n */\nexport function propagate(global) {\n    const document = global.document;\n    if (!document.addGlobalEventListener) {\n        return;\n    }\n    document.addGlobalEventListener('message', ({ data }) => {\n        if (data[12 /* type */] !== 1 /* EVENT */) {\n            return;\n        }\n        const event = data[39 /* event */];\n        const node = get(event[7 /* index */]);\n        if (node !== null) {\n            node.dispatchEvent(Object.assign(new Event(event[12 /* type */], {\n                bubbles: event[25 /* bubbles */],\n                cancelable: event[26 /* cancelable */],\n            }), {\n                cancelBubble: event[27 /* cancelBubble */],\n                defaultPrevented: event[29 /* defaultPrevented */],\n                eventPhase: event[30 /* eventPhase */],\n                isTrusted: event[31 /* isTrusted */],\n                returnValue: event[32 /* returnValue */],\n                target: targetFromTransfer(global.document, event),\n                timeStamp: event[33 /* timeStamp */],\n                scoped: event[34 /* scoped */],\n                keyCode: event[35 /* keyCode */],\n                pageX: event[60 /* pageX */],\n                pageY: event[61 /* pageY */],\n                offsetX: event[65 /* offsetX */],\n                offsetY: event[66 /* offsetY */],\n                touches: touchListFromTransfer(global.document, event, 62 /* touches */),\n                changedTouches: touchListFromTransfer(global.document, event, 63 /* changedTouches */),\n            }));\n        }\n    });\n}\n//# sourceMappingURL=Event.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a;\nimport { ParentNode } from './ParentNode';\nimport { DOMTokenList, synchronizedAccessor } from './DOMTokenList';\nimport { toString as attrsToString, matchPredicate as matchAttrPredicate } from './Attr';\nimport { mutate } from '../MutationObserver';\nimport { toLower, toUpper } from '../../utils';\nimport { CSSStyleDeclaration } from '../css/CSSStyleDeclaration';\nimport { matchChildrenElements } from './matchElements';\nimport { reflectProperties } from './enhanceElement';\nimport { store as storeString } from '../strings';\nimport { transfer } from '../MutationTransfer';\nimport { HTML_NAMESPACE } from '../../transfer/TransferrableNodes';\nimport { parse } from '../../third_party/html-parser/html-parser';\nimport { propagate } from './Node';\nimport { Event } from '../Event';\nexport const NS_NAME_TO_CLASS = {};\nexport const registerSubclass = (localName, subclass, namespace = HTML_NAMESPACE) => (NS_NAME_TO_CLASS[`${namespace}:${localName}`] = subclass);\nexport function definePropertyBackedAttributes(defineOn, attributes) {\n    const sub = Object.create(defineOn[46 /* propertyBackedAttributes */]);\n    defineOn[46 /* propertyBackedAttributes */] = Object.assign(sub, attributes);\n}\n/**\n * There are six kinds of elements, each having different start/close tag semantics.\n * @see https://html.spec.whatwg.org/multipage/syntax.html#elements-2\n */\nvar ElementKind;\n(function (ElementKind) {\n    ElementKind[ElementKind[\"NORMAL\"] = 0] = \"NORMAL\";\n    ElementKind[ElementKind[\"VOID\"] = 1] = \"VOID\";\n    // The following element kinds have no special handling in worker-dom yet\n    // and are lumped into the NORMAL kind.\n    /*\n    FOREIGN,\n    TEMPLATE,\n    RAW_TEXT,\n    ESCAPABLE_RAW,\n    */\n})(ElementKind || (ElementKind = {}));\n/**\n * @see https://html.spec.whatwg.org/multipage/syntax.html#void-elements\n */\nconst VOID_ELEMENTS = ['AREA', 'BASE', 'BR', 'COL', 'EMBED', 'HR', 'IMG', 'INPUT', 'LINK', 'META', 'PARAM', 'SOURCE', 'TRACK', 'WBR'];\nexport class Element extends ParentNode {\n    constructor(nodeType, localName, namespaceURI, ownerDocument, overrideIndex) {\n        super(nodeType, toUpper(localName), ownerDocument, overrideIndex);\n        this.attributes = [];\n        this.style = new CSSStyleDeclaration(this);\n        this.namespaceURI = namespaceURI || HTML_NAMESPACE;\n        this.localName = localName;\n        this.kind = VOID_ELEMENTS.includes(this.tagName) ? ElementKind.VOID : ElementKind.NORMAL;\n        this[8 /* creationFormat */] = [\n            this[7 /* index */],\n            this.nodeType,\n            storeString(this.localName),\n            0,\n            this.namespaceURI === null ? 0 : storeString(this.namespaceURI),\n        ];\n    }\n    // Unimplemented properties\n    // Element.clientHeight – https://developer.mozilla.org/en-US/docs/Web/API/Element/clientHeight\n    // Element.clientLeft – https://developer.mozilla.org/en-US/docs/Web/API/Element/clientLeft\n    // Element.clientTop – https://developer.mozilla.org/en-US/docs/Web/API/Element/clientTop\n    // Element.clientWidth – https://developer.mozilla.org/en-US/docs/Web/API/Element/clientWidth\n    // set Element.innerHTML – https://developer.mozilla.org/en-US/docs/Web/API/Element/innerHTML\n    // NonDocumentTypeChildNode.nextElementSibling – https://developer.mozilla.org/en-US/docs/Web/API/NonDocumentTypeChildNode/nextElementSibling\n    // Element.prefix – https://developer.mozilla.org/en-US/docs/Web/API/Element/prefix\n    // NonDocummentTypeChildNode.previousElementSibling – https://developer.mozilla.org/en-US/docs/Web/API/NonDocumentTypeChildNode/previousElementSibling\n    // Element.scrollHeight – https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollHeight\n    // Element.scrollLeft – https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollLeft\n    // Element.scrollLeftMax – https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollLeftMax\n    // Element.scrollTop – https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollTop\n    // Element.scrollTopMax – https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollTopMax\n    // Element.scrollWidth – https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollWidth\n    // Element.shadowRoot – !! CustomElements – https://developer.mozilla.org/en-US/docs/Web/API/Element/shadowRoot\n    // Element.slot – !! CustomElements – https://developer.mozilla.org/en-US/docs/Web/API/Element/slot\n    // Element.tabStop – https://developer.mozilla.org/en-US/docs/Web/API/Element/tabStop\n    // Element.undoManager – https://developer.mozilla.org/en-US/docs/Web/API/Element/undoManager\n    // Element.undoScope – https://developer.mozilla.org/en-US/docs/Web/API/Element/undoScope\n    // Unimplemented Methods\n    // Element.attachShadow() – !! CustomElements – https://developer.mozilla.org/en-US/docs/Web/API/Element/attachShadow\n    // Element.animate() – https://developer.mozilla.org/en-US/docs/Web/API/Element/animate\n    // Element.closest() – https://developer.mozilla.org/en-US/docs/Web/API/Element/closest\n    // Element.getAttributeNames() – https://developer.mozilla.org/en-US/docs/Web/API/Element/getAttributeNames\n    // Element.getBoundingClientRect() – https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect\n    // Element.getClientRects() – https://developer.mozilla.org/en-US/docs/Web/API/Element/getClientRects\n    // Element.getElementsByTagNameNS() – https://developer.mozilla.org/en-US/docs/Web/API/Element/getElementsByTagNameNS\n    // Element.insertAdjacentElement() – https://developer.mozilla.org/en-US/docs/Web/API/Element/insertAdjacentElement\n    // Element.insertAdjacentHTML() – https://developer.mozilla.org/en-US/docs/Web/API/Element/insertAdjacentHTML\n    // Element.insertAdjacentText() – https://developer.mozilla.org/en-US/docs/Web/API/Element/insertAdjacentText\n    // Element.matches() – https://developer.mozilla.org/en-US/docs/Web/API/Element/matches\n    // Element.releasePointerCapture() – https://developer.mozilla.org/en-US/docs/Web/API/Element/releasePointerCapture\n    // Element.requestFullscreen() – https://developer.mozilla.org/en-US/docs/Web/API/Element/requestFullscreen\n    // Element.requestPointerLock() – https://developer.mozilla.org/en-US/docs/Web/API/Element/requestPointerLock\n    // Element.scrollIntoView() – https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollIntoView\n    // Element.setCapture() – https://developer.mozilla.org/en-US/docs/Web/API/Element/setCapture\n    // Element.setPointerCapture() – https://developer.mozilla.org/en-US/docs/Web/API/Element/setPointerCapture\n    // Partially implemented Mixin Methods\n    // Both Element.querySelector() and Element.querySelector() are only implemented for the following simple selectors:\n    // - Element selectors\n    // - ID selectors\n    // - Class selectors\n    // - Attribute selectors\n    // Element.querySelector() – https://developer.mozilla.org/en-US/docs/Web/API/Element/querySelector\n    // Element.querySelectorAll() – https://developer.mozilla.org/en-US/docs/Web/API/Element/querySelectorAll\n    // Mixins not implemented\n    // Slotable.assignedSlot – https://developer.mozilla.org/en-US/docs/Web/API/Slotable/assignedSlot\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/outerHTML\n     * @return string representation of serialized HTML describing the Element and its descendants.\n     */\n    get outerHTML() {\n        const tag = this.localName || this.tagName;\n        const start = `<${[tag, attrsToString(this.attributes)].join(' ').trim()}>`;\n        const contents = this.innerHTML;\n        if (!contents) {\n            if (this.kind === ElementKind.VOID) {\n                // Void elements e.g. <input> only have a start tag (unless children are added programmatically).\n                // https://html.spec.whatwg.org/multipage/syntax.html#void-elements\n                return start;\n            }\n        }\n        return start + contents + `</${tag}>`;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/innerHTML\n     * @return string representation of serialized HTML describing the Element's descendants.\n     */\n    get innerHTML() {\n        const childNodes = this.childNodes;\n        if (childNodes.length) {\n            return childNodes\n                .map((child) => {\n                switch (child.nodeType) {\n                    case 3 /* TEXT_NODE */:\n                        return child.textContent;\n                    case 8 /* COMMENT_NODE */:\n                        return `<!--${child.textContent}-->`;\n                    default:\n                        return child.outerHTML;\n                }\n            })\n                .join('');\n        }\n        return '';\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/innerHTML\n     * @param html The raw html string to parse.\n     */\n    set innerHTML(html) {\n        const root = parse(html, this);\n        // remove previous children\n        this.childNodes.forEach((n) => {\n            propagate(n, 'isConnected', false);\n            propagate(n, 45 /* scopingRoot */, n);\n        });\n        mutate(this.ownerDocument, {\n            removedNodes: this.childNodes,\n            type: 2 /* CHILD_LIST */,\n            target: this,\n        }, [\n            2 /* CHILD_LIST */,\n            this[7 /* index */],\n            0,\n            0,\n            0,\n            this.childNodes.length,\n            ...this.childNodes.map((node) => node[7 /* index */]),\n        ]);\n        this.childNodes = [];\n        // add new children\n        root.childNodes.forEach((child) => this.appendChild(child));\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/textContent\n     * @param text new text replacing all childNodes content.\n     */\n    set textContent(text) {\n        // TODO(KB): Investigate removing all children in a single .splice to childNodes.\n        this.childNodes.slice().forEach((child) => child.remove());\n        this.appendChild(this.ownerDocument.createTextNode(text));\n    }\n    /**\n     * Getter returning the text representation of Element.childNodes.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/textContent\n     * @return text from all childNodes.\n     */\n    get textContent() {\n        return this.getTextContent();\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/tagName\n     * @return string tag name (i.e 'div')\n     */\n    get tagName() {\n        return this.nodeName;\n    }\n    /**\n     * Sets the value of an attribute on this element using a null namespace.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/setAttribute\n     * @param name attribute name\n     * @param value attribute value\n     */\n    setAttribute(name, value) {\n        this.setAttributeNS(HTML_NAMESPACE, name, value);\n    }\n    /**\n     * Get the value of an attribute on this Element with the null namespace.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/getAttribute\n     * @param name attribute name\n     * @return value of a specified attribute on the element, or null if the attribute doesn't exist.\n     */\n    getAttribute(name) {\n        return this.getAttributeNS(HTML_NAMESPACE, name);\n    }\n    /**\n     * Remove an attribute from this element in the null namespace.\n     *\n     * Method returns void, so it is not chainable.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/removeAttribute\n     * @param name attribute name\n     */\n    removeAttribute(name) {\n        this.removeAttributeNS(HTML_NAMESPACE, name);\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/hasAttribute\n     * @param name attribute name\n     * @return Boolean indicating if the element has the specified attribute.\n     */\n    hasAttribute(name) {\n        return this.hasAttributeNS(HTML_NAMESPACE, name);\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/hasAttributes\n     * @return Boolean indicating if the element has any attributes.\n     */\n    hasAttributes() {\n        return this.attributes.length > 0;\n    }\n    /**\n     * Sets the value of an attribute on this Element with the provided namespace.\n     *\n     * If the attribute already exists, the value is updated; otherwise a new attribute is added with the specified name and value.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/setAttributeNS\n     * @param namespaceURI\n     * @param name attribute name\n     * @param value attribute value\n     */\n    setAttributeNS(namespaceURI, name, value) {\n        const valueAsString = String(value);\n        const propertyBacked = this.constructor[46 /* propertyBackedAttributes */][name];\n        if (propertyBacked !== undefined) {\n            if (!this.attributes.find(matchAttrPredicate(namespaceURI, name))) {\n                this.attributes.push({\n                    namespaceURI,\n                    name,\n                    value: valueAsString,\n                });\n            }\n            propertyBacked[1](this, valueAsString);\n            return;\n        }\n        const oldValue = this[44 /* storeAttribute */](namespaceURI, name, valueAsString);\n        mutate(this.ownerDocument, {\n            type: 0 /* ATTRIBUTES */,\n            target: this,\n            attributeName: name,\n            attributeNamespace: namespaceURI,\n            value: valueAsString,\n            oldValue,\n        }, [\n            0 /* ATTRIBUTES */,\n            this[7 /* index */],\n            storeString(name),\n            storeString(namespaceURI),\n            value !== null ? storeString(valueAsString) + 1 : 0,\n        ]);\n    }\n    [(_a = 46 /* propertyBackedAttributes */, 44 /* storeAttribute */)](namespaceURI, name, value) {\n        const attr = this.attributes.find(matchAttrPredicate(namespaceURI, name));\n        const oldValue = (attr && attr.value) || '';\n        if (attr) {\n            attr.value = value;\n        }\n        else {\n            this.attributes.push({\n                namespaceURI,\n                name,\n                value,\n            });\n        }\n        return oldValue;\n    }\n    /**\n     * Get the value of an attribute on this Element with the specified namespace.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/getAttributeNS\n     * @param namespaceURI attribute namespace\n     * @param name attribute name\n     * @return value of a specified attribute on the element, or null if the attribute doesn't exist.\n     */\n    getAttributeNS(namespaceURI, name) {\n        const attr = this.attributes.find(matchAttrPredicate(namespaceURI, name));\n        if (attr) {\n            const propertyBacked = this.constructor[46 /* propertyBackedAttributes */][name];\n            return propertyBacked !== undefined ? propertyBacked[0](this) : attr.value;\n        }\n        return null;\n    }\n    /**\n     * Remove an attribute from this element in the specified namespace.\n     *\n     * Method returns void, so it is not chainable.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/removeAttribute\n     * @param namespaceURI attribute namespace\n     * @param name attribute name\n     */\n    removeAttributeNS(namespaceURI, name) {\n        const index = this.attributes.findIndex(matchAttrPredicate(namespaceURI, name));\n        if (index >= 0) {\n            const oldValue = this.attributes[index].value;\n            this.attributes.splice(index, 1);\n            mutate(this.ownerDocument, {\n                type: 0 /* ATTRIBUTES */,\n                target: this,\n                attributeName: name,\n                attributeNamespace: namespaceURI,\n                oldValue,\n            }, [\n                0 /* ATTRIBUTES */,\n                this[7 /* index */],\n                storeString(name),\n                storeString(namespaceURI),\n                0,\n            ]);\n        }\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/hasAttributeNS\n     * @param namespaceURI attribute namespace\n     * @param name attribute name\n     * @return Boolean indicating if the element has the specified attribute.\n     */\n    hasAttributeNS(namespaceURI, name) {\n        return this.attributes.some(matchAttrPredicate(namespaceURI, name));\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/getElementsByClassName\n     * @param names contains one more more classnames to match on. Multiples are space seperated, indicating an AND operation.\n     * @return Element array with matching classnames\n     */\n    getElementsByClassName(names) {\n        const inputClassList = names.split(' ');\n        // TODO(KB) – Compare performance of [].some(value => DOMTokenList.contains(value)) and regex.\n        // const classRegex = new RegExp(classNames.split(' ').map(name => `(?=.*${name})`).join(''));\n        return matchChildrenElements(this, (element) => inputClassList.some((inputClassName) => element.classList.contains(inputClassName)));\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/getElementsByTagName\n     * @param tagName the qualified name to look for. The special string \"*\" represents all elements.\n     * @return Element array with matching tagnames\n     */\n    getElementsByTagName(tagName) {\n        const lowerTagName = toLower(tagName);\n        return matchChildrenElements(this, tagName === '*'\n            ? (_) => true\n            : (element) => (element.namespaceURI === HTML_NAMESPACE ? element.localName === lowerTagName : element.tagName === tagName));\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByName\n     * @param name value of name attribute elements must have to be returned\n     * @return Element array with matching name attributes\n     */\n    getElementsByName(name) {\n        const stringName = '' + name;\n        return matchChildrenElements(this, (element) => element.getAttribute('name') === stringName);\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/cloneNode\n     * @param deep boolean determines if the clone should include a recursive copy of all childNodes.\n     * @return Element containing all current attributes and potentially childNode clones of the Element requested to be cloned.\n     */\n    cloneNode(deep = false) {\n        const clone = this.ownerDocument.createElementNS(this.namespaceURI, this.namespaceURI === HTML_NAMESPACE ? toLower(this.tagName) : this.tagName);\n        this.attributes.forEach((attr) => clone.setAttribute(attr.name, attr.value));\n        if (deep) {\n            this.childNodes.forEach((child) => clone.appendChild(child.cloneNode(deep)));\n        }\n        return clone;\n    }\n    /**\n     * Return the ClientRect for an Element once determined by the main thread.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect\n     * @return Promise<ClientRect>\n     *\n     * Note: Edge and IE11 do not return the x/y value, but top/left are equivalent. Normalize the values here.\n     */\n    getBoundingClientRectAsync() {\n        const defaultValue = {\n            left: 0,\n            top: 0,\n            right: 0,\n            bottom: 0,\n            x: 0,\n            y: 0,\n            width: 0,\n            height: 0,\n        };\n        return new Promise((resolve) => {\n            const messageHandler = ({ data }) => {\n                if (data[12 /* type */] === 6 /* GET_BOUNDING_CLIENT_RECT */ &&\n                    data[13 /* target */][0] === this[7 /* index */]) {\n                    this.ownerDocument.removeGlobalEventListener('message', messageHandler);\n                    const transferredBoundingClientRect = data[38 /* data */];\n                    resolve({\n                        top: transferredBoundingClientRect[0],\n                        right: transferredBoundingClientRect[1],\n                        bottom: transferredBoundingClientRect[2],\n                        left: transferredBoundingClientRect[3],\n                        width: transferredBoundingClientRect[4],\n                        height: transferredBoundingClientRect[5],\n                        x: transferredBoundingClientRect[0],\n                        y: transferredBoundingClientRect[3],\n                    });\n                }\n            };\n            if (!this.ownerDocument.addGlobalEventListener || !this.isConnected) {\n                // Elements run within Node runtimes are missing addEventListener as a global.\n                // In this case, treat the return value the same as a disconnected node.\n                resolve(defaultValue);\n            }\n            else {\n                this.ownerDocument.addGlobalEventListener('message', messageHandler);\n                transfer(this.ownerDocument, [5 /* GET_BOUNDING_CLIENT_RECT */, this[7 /* index */]]);\n                setTimeout(resolve, 500, defaultValue); // TODO: Why a magical constant, define and explain.\n            }\n        });\n    }\n    // https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/click\n    click() {\n        const event = new Event('click', {});\n        event.target = this;\n        this.dispatchEvent(event);\n    }\n    get classList() {\n        return this._classList || (this._classList = new DOMTokenList(this, 'class'));\n    }\n}\nElement[_a] = {\n    class: [(el) => el.classList.value, (el, value) => (el.classList.value = value)],\n    style: [(el) => el.cssText, (el, value) => (el.cssText = value)],\n};\nsynchronizedAccessor(Element, 'classList', 'className');\nreflectProperties([{ id: [''] }], Element);\n//# sourceMappingURL=Element.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a;\nimport { Element } from './Element';\nimport { reflectProperties } from './enhanceElement';\nimport { matchNearestParent, tagNameConditionPredicate } from './matchElements';\nexport const appendGlobalEventProperties = (keys) => {\n    const keysToAppend = keys.filter((key) => !HTMLElement.prototype.hasOwnProperty(key));\n    if (keysToAppend.length <= 0) {\n        return;\n    }\n    keysToAppend.forEach((key) => {\n        const normalizedKey = key.replace(/on/, '');\n        Object.defineProperty(HTMLElement.prototype, key, {\n            enumerable: true,\n            get() {\n                return this[76 /* propertyEventHandlers */][normalizedKey] || null;\n            },\n            set(value) {\n                const stored = this[76 /* propertyEventHandlers */][normalizedKey];\n                if (stored) {\n                    this.removeEventListener(normalizedKey, stored);\n                }\n                this.addEventListener(normalizedKey, value);\n                this[76 /* propertyEventHandlers */][normalizedKey] = value;\n            },\n        });\n    });\n};\nexport class HTMLElement extends Element {\n    constructor() {\n        super(...arguments);\n        this[_a] = {};\n    }\n    /**\n     * Find the nearest parent form element.\n     * Implemented in HTMLElement since so many extensions of HTMLElement repeat this functionality. This is not to spec.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLFieldSetElement\n     * @return nearest parent form element.\n     */\n    get form() {\n        return matchNearestParent(this, tagNameConditionPredicate(['FORM']));\n    }\n    [(_a = 76 /* propertyEventHandlers */, 68 /* serializeAsTransferrableObject */)]() {\n        return [7 /* HTMLElement */, this[7 /* index */]];\n    }\n}\n// Reflected properties\n// HTMLElement.accessKey => string, reflected attribute\n// HTMLElement.contentEditable => string, reflected attribute\n// HTMLElement.dir => string, reflected attribute\n// HTMLElement.lang => string, reflected attribute\n// HTMLElement.title => string, reflected attribute\n// HTMLElement.draggable => boolean, reflected attribute\n// HTMLElement.hidden => boolean, reflected attribute\n// HTMLElement.noModule => boolean, reflected attribute\n// HTMLElement.spellcheck => boolean, reflected attribute\n// HTMLElement.translate => boolean, reflected attribute\nreflectProperties([\n    { accessKey: [''] },\n    { contentEditable: ['inherit'] },\n    { dir: [''] },\n    { lang: [''] },\n    { title: [''] },\n    {\n        draggable: [false, /* attr */ undefined, /* keywords */ ['true', 'false']],\n    },\n    { hidden: [false, /* attr */ undefined] },\n    { noModule: [false] },\n    {\n        spellcheck: [true, /* attr */ undefined, /* keywords */ ['true', 'false']],\n    },\n    { translate: [true, /* attr */ undefined, /* keywords */ ['yes', 'no']] },\n], HTMLElement);\n// Properties\n// HTMLElement.accessKeyLabel => string, readonly value of \"accessKey\"\n// HTMLElement.isContentEditable => boolean, readonly value of contentEditable\n// HTMLElement.nonce => string, NOT REFLECTED\n// HTMLElement.tabIndex => number, reflected attribute\n// Layout Properties (TBD)\n// HTMLElement.offsetHeight => double, readonly\n// HTMLElement.offsetLeft => double, readonly\n// HTMLElement.offsetParent => Element\n// HTMLElement.offsetTop => double, readonly\n// HTMLElement.offsetWidth => double, readonly\n// Unimplemented Properties\n// HTMLElement.contextMenu => HTMLElement\n// HTMLElement.dataset => Map<string (get/set), string>\n// HTMLElement.dropzone => DOMSettableTokenList (DOMTokenList)\n// HTMLElement.inert => boolean, reflected\n// HTMLElement.itemScope => boolean\n// HTMLElement.itemType => DOMSettableTokenList (DOMTokenList)\n// HTMLElement.itemId => string\n// HTMLElement.itemRef => DOMSettableTokenList (DOMTokenList)\n// HTMLElement.itemProp => DOMSettableTokenList (DOMTokenList)\n// HTMLElement.itemValue => object\n// HTMLElement.properties => HTMLPropertiesCollection, readonly\n//# sourceMappingURL=HTMLElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass, definePropertyBackedAttributes } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { DOMTokenList, synchronizedAccessor } from './DOMTokenList';\nimport { reflectProperties } from './enhanceElement';\nexport class HTMLAnchorElement extends HTMLElement {\n    get relList() {\n        return this._relList || (this._relList = new DOMTokenList(this, 'rel'));\n    }\n    /**\n     * Returns the href property/attribute value\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLHyperlinkElementUtils/toString\n     * @return string href attached to HTMLAnchorElement\n     */\n    toString() {\n        return this.href;\n    }\n    /**\n     * A Synonym for the Node.textContent property getter.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLAnchorElement\n     * @return value of text node direct child of this Element.\n     */\n    get text() {\n        return this.textContent;\n    }\n    /**\n     * A Synonym for the Node.textContent property setter.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLAnchorElement\n     * @param text replacement for all current childNodes.\n     */\n    set text(text) {\n        this.textContent = text;\n    }\n}\nregisterSubclass('a', HTMLAnchorElement);\ndefinePropertyBackedAttributes(HTMLAnchorElement, {\n    rel: [(el) => el.relList.value, (el, value) => (el.relList.value = value)],\n});\nsynchronizedAccessor(HTMLAnchorElement, 'relList', 'rel');\n// Reflected properties, strings.\n// HTMLAnchorElement.href => string, reflected attribute\n// HTMLAnchorElement.hreflang => string, reflected attribute\n// HTMLAnchorElement.media => string, reflected attribute\n// HTMLAnchorElement.target => string, reflected attribute\n// HTMLAnchorElement.type => string, reflected attribute\nreflectProperties([{ href: [''] }, { hreflang: [''] }, { media: [''] }, { target: [''] }, { type: [''] }], HTMLAnchorElement);\n// Unimplemented\n// HTMLAnchorElement.download => string, reflected attribute\n// HTMLAnchorElement.type => Is a DOMString that reflects the type HTML attribute, indicating the MIME type of the linked resource.\n// Unimplemented URL parse of href attribute due to IE11 compatibility and low usage.\n// Note: Implementation doable using a private url property\n/*\n  class {\n    private url: URL | null = null;\n\n    constructor(...) {\n      // Element.getAttribute('href') => Element.href.\n      Object.assign(this[TransferrableKeys.propertyBackedAttributes], {\n        href: this.href,\n      });\n    }\n\n    get href(): string {\n      return this.url ? this.url.href : '';\n    }\n    set href(url: string) {\n      this.url = new URL(url);\n      this.setAttribute('href', this.url.href);\n    }\n  }\n*/\n// HTMLAnchorElement.host => string\n// HTMLAnchorElement.hostname => string\n// HTMLAnchorElement.protocol => string\n// HTMLAnchorElement.pathname => string\n// HTMLAnchorElement.search => string\n// HTMLAnchorElement.hash => string\n// HTMLAnchorElement.username => string\n// HTMLAnchorElement.password => string\n// HTMLAnchorElement.origin => string, readonly (getter no setter)\n//# sourceMappingURL=HTMLAnchorElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nexport class HTMLButtonElement extends HTMLElement {\n}\nregisterSubclass('button', HTMLButtonElement);\n// Reflected properties, strings.\n// HTMLButtonElement.formAction => string, reflected attribute\n// HTMLButtonElement.formEnctype => string, reflected attribute\n// HTMLButtonElement.formMethod => string, reflected attribute\n// HTMLButtonElement.formTarget => string, reflected attribute\n// HTMLButtonElement.name => string, reflected attribute\n// HTMLButtonElement.type => string, reflected attribute (default submit)\n// HTMLButtonElement.value => string, reflected attribute\n// HTMLButtonElement.autofocus => boolean, reflected attribute\n// HTMLButtonElement.disabled => boolean, reflected attribute\nreflectProperties([\n    { formAction: [''] },\n    { formEnctype: [''] },\n    { formMethod: [''] },\n    { formTarget: [''] },\n    { name: [''] },\n    { type: ['submit'] },\n    { value: [''] },\n    { autofocus: [false] },\n    { disabled: [false] },\n], HTMLButtonElement);\n// Not reflected\n// HTMLButtonElement.formNoValidate => boolean\n// HTMLButtonElement.validity => ValidityState, readonly\n// Unimplemented\n// HTMLButtonElement.form => HTMLFormElement | null, readonly\n// HTMLButtonElement.labels => Array<HTMLLabelElement>, readonly\n// HTMLButtonElement.menu => HTMLMenuElement\n// HTMLButtonElement.willValidate => boolean, readonly\n// HTMLButtonElement.validationMessage => string, readonly\n//# sourceMappingURL=HTMLButtonElement.js.map","/**\n * Copyright 2019 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { store } from './strings';\nconst f32 = new Float32Array(1);\nconst u16 = new Uint16Array(f32.buffer);\nfunction isSmallInt(num) {\n    u16[0] = num;\n    // If the Uint16Array doesn't coerce it to another value, that means it fits\n    // into a Uint16Array.\n    return u16[0] === num;\n}\n/**\n * Serializes arguments into a Uint16 compatible format.\n *\n * The serialization format uses a variable length tuple, with the first item\n * being the encoded representation's type and any number of values afterwards.\n *\n * @param args The arguments to serialize\n */\nexport function serializeTransferrableObject(args) {\n    const serialized = [];\n    for (let i = 0; i < args.length; i++) {\n        const arg = args[i];\n        if (typeof arg === 'number') {\n            if (isSmallInt(arg)) {\n                serialized.push(1 /* SmallInt */, arg);\n            }\n            else {\n                f32[0] = arg;\n                serialized.push(2 /* Float */, u16[0], u16[1]);\n            }\n            continue;\n        }\n        if (typeof arg === 'string') {\n            serialized.push(3 /* String */, store(arg));\n            continue;\n        }\n        if (Array.isArray(arg)) {\n            serialized.push(4 /* Array */, arg.length);\n            const serializedArray = serializeTransferrableObject(arg);\n            for (let i = 0; i < serializedArray.length; i++) {\n                serialized.push(serializedArray[i]);\n            }\n            continue;\n        }\n        if (typeof arg === 'object') {\n            const serializedObject = arg[68 /* serializeAsTransferrableObject */]();\n            for (let i = 0; i < serializedObject.length; i++) {\n                serialized.push(serializedObject[i]);\n            }\n            continue;\n        }\n        throw new Error('Cannot serialize argument.');\n    }\n    return serialized;\n}\n//# sourceMappingURL=serializeTransferrableObject.js.map","/**\n * Copyright 2019 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { transfer } from '../MutationTransfer';\nimport { serializeTransferrableObject } from '../serializeTransferrableObject';\nimport { store } from '../strings';\n/**\n * Wrapper class for CanvasGradient. The user will be able to manipulate as a regular CanvasGradient object.\n */\nexport class CanvasGradient {\n    constructor(id, document) {\n        this.document = document;\n        this.id = id;\n    }\n    addColorStop(offset, color) {\n        transfer(this.document, [\n            9 /* OBJECT_MUTATION */,\n            store('addColorStop'),\n            2,\n            ...this[68 /* serializeAsTransferrableObject */](),\n            ...serializeTransferrableObject([...arguments]),\n        ]);\n    }\n    [68 /* serializeAsTransferrableObject */]() {\n        return [5 /* TransferObject */, this.id];\n    }\n}\n//# sourceMappingURL=CanvasGradient.js.map","/**\n * Copyright 2019 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Wrapper class for CanvasPattern. The user will be able to manipulate as a regular CanvasPattern object.\n * This class will be used when the CanvasRenderingContext is using an OffscreenCanvas polyfill.\n */\nexport class CanvasPattern {\n    constructor(id) {\n        this.id = id;\n    }\n    /**\n     * This is an experimental method.\n     */\n    setTransform() { }\n    [68 /* serializeAsTransferrableObject */]() {\n        return [5 /* TransferObject */, this.id];\n    }\n}\n//# sourceMappingURL=CanvasPattern.js.map","/**\n * Copyright 2019 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { transfer } from '../MutationTransfer';\nimport { toLower } from '../../utils';\nimport { store } from '../strings';\nimport { serializeTransferrableObject } from '../serializeTransferrableObject';\nimport { CanvasGradient } from './CanvasGradient';\nimport { CanvasPattern } from './CanvasPattern';\n/**\n * Handles calls to a CanvasRenderingContext2D object in cases where the user's environment does not\n * support native OffscreenCanvas.\n */\nexport class OffscreenCanvasPolyfill {\n    constructor(canvas) {\n        this.canvas = canvas;\n    }\n    getContext(contextType) {\n        if (!this.context) {\n            if (toLower(contextType) === '2d') {\n                this.context = new OffscreenCanvasRenderingContext2DPolyfill(this.canvas);\n            }\n            else {\n                throw new Error('Context type not supported.');\n            }\n        }\n        return this.context;\n    }\n}\nclass OffscreenCanvasRenderingContext2DPolyfill {\n    constructor(canvas) {\n        this.objectIndex = 0;\n        this.canvasElement = canvas;\n        this.lineDash = [];\n    }\n    [67 /* mutated */](fnName, args) {\n        transfer(this.canvasElement.ownerDocument, [\n            9 /* OBJECT_MUTATION */,\n            store(fnName),\n            args.length,\n            ...this[68 /* serializeAsTransferrableObject */](),\n            ...serializeTransferrableObject(args),\n        ]);\n    }\n    [68 /* serializeAsTransferrableObject */]() {\n        return [6 /* CanvasRenderingContext2D */, this.canvasElement[7 /* index */]];\n    }\n    /**\n     * Creates object in the main thread, and associates it with the id provided.\n     * @param objectId ID to associate the created object with.\n     * @param creationMethod Method to use for object creation.\n     * @param creationArgs Arguments to pass into the creation method.\n     */\n    createObjectReference(objectId, creationMethod, creationArgs) {\n        transfer(this.canvasElement.ownerDocument, [\n            10 /* OBJECT_CREATION */,\n            store(creationMethod),\n            objectId,\n            creationArgs.length,\n            ...this[68 /* serializeAsTransferrableObject */](),\n            ...serializeTransferrableObject(creationArgs),\n        ]);\n    }\n    get canvas() {\n        return this.canvasElement;\n    }\n    clearRect(x, y, w, h) {\n        this[67 /* mutated */]('clearRect', [...arguments]);\n    }\n    fillRect(x, y, w, h) {\n        this[67 /* mutated */]('fillRect', [...arguments]);\n    }\n    strokeRect(x, y, w, h) {\n        this[67 /* mutated */]('strokeRect', [...arguments]);\n    }\n    set lineWidth(value) {\n        this[67 /* mutated */]('lineWidth', [...arguments]);\n    }\n    fillText(text, x, y, maxWidth) {\n        this[67 /* mutated */]('fillText', [...arguments]);\n    }\n    moveTo(x, y) {\n        this[67 /* mutated */]('moveTo', [...arguments]);\n    }\n    lineTo(x, y) {\n        this[67 /* mutated */]('lineTo', [...arguments]);\n    }\n    closePath() {\n        this[67 /* mutated */]('closePath', []);\n    }\n    stroke() {\n        this[67 /* mutated */]('stroke', []);\n    }\n    restore() {\n        this[67 /* mutated */]('restore', []);\n    }\n    save() {\n        this[67 /* mutated */]('save', []);\n    }\n    resetTransform() {\n        this[67 /* mutated */]('resetTransform', []);\n    }\n    rotate(angle) {\n        this[67 /* mutated */]('rotate', [...arguments]);\n    }\n    transform(a, b, c, d, e, f) {\n        this[67 /* mutated */]('transform', [...arguments]);\n    }\n    translate(x, y) {\n        this[67 /* mutated */]('translate', [...arguments]);\n    }\n    scale(x, y) {\n        this[67 /* mutated */]('scale', [...arguments]);\n    }\n    set globalAlpha(value) {\n        this[67 /* mutated */]('globalAlpha', [...arguments]);\n    }\n    set globalCompositeOperation(value) {\n        this[67 /* mutated */]('globalCompositeOperation', [...arguments]);\n    }\n    set imageSmoothingQuality(value) {\n        this[67 /* mutated */]('imageSmoothingQuality', [...arguments]);\n    }\n    set fillStyle(value) {\n        this[67 /* mutated */]('fillStyle', [...arguments]);\n    }\n    set strokeStyle(value) {\n        this[67 /* mutated */]('strokeStyle', [...arguments]);\n    }\n    set shadowBlur(value) {\n        this[67 /* mutated */]('shadowBlur', [...arguments]);\n    }\n    set shadowColor(value) {\n        this[67 /* mutated */]('shadowColor', [...arguments]);\n    }\n    set shadowOffsetX(value) {\n        this[67 /* mutated */]('shadowOffsetX', [...arguments]);\n    }\n    set shadowOffsetY(value) {\n        this[67 /* mutated */]('shadowOffsetY', [...arguments]);\n    }\n    set filter(value) {\n        this[67 /* mutated */]('filter', [...arguments]);\n    }\n    beginPath() {\n        this[67 /* mutated */]('beginPath', []);\n    }\n    strokeText(text, x, y, maxWidth) {\n        this[67 /* mutated */]('strokeText', [...arguments]);\n    }\n    set textAlign(value) {\n        this[67 /* mutated */]('textAlign', [...arguments]);\n    }\n    set textBaseline(value) {\n        this[67 /* mutated */]('textBaseline', [...arguments]);\n    }\n    set lineCap(value) {\n        this[67 /* mutated */]('lineCap', [...arguments]);\n    }\n    set lineDashOffset(value) {\n        this[67 /* mutated */]('lineDashOffset', [...arguments]);\n    }\n    set lineJoin(value) {\n        this[67 /* mutated */]('lineJoin', [...arguments]);\n    }\n    set miterLimit(value) {\n        this[67 /* mutated */]('miterLimit', [...arguments]);\n    }\n    arc(x, y, radius, startAngle, endAngle, anticlockwise) {\n        this[67 /* mutated */]('arc', [...arguments]);\n    }\n    arcTo(x1, y1, x2, y2, radius) {\n        this[67 /* mutated */]('arcTo', [...arguments]);\n    }\n    set direction(value) {\n        this[67 /* mutated */]('direction', [...arguments]);\n    }\n    set font(value) {\n        this[67 /* mutated */]('font', [...arguments]);\n    }\n    ellipse(x, y, radiusX, radiusY, rotation, startAngle, endAngle, anticlockwise) {\n        this[67 /* mutated */]('ellipse', [...arguments]);\n    }\n    bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y) {\n        this[67 /* mutated */]('bezierCurveTo', [...arguments]);\n    }\n    rect(x, y, width, height) {\n        this[67 /* mutated */]('rect', [...arguments]);\n    }\n    quadraticCurveTo(cpx, cpy, x, y) {\n        this[67 /* mutated */]('quadraticCurveTo', [...arguments]);\n    }\n    set imageSmoothingEnabled(value) {\n        this[67 /* mutated */]('imageSmoothingEnabled', [...arguments]);\n    }\n    setLineDash(lineDash) {\n        lineDash = [...lineDash];\n        if (lineDash.length % 2 !== 0) {\n            lineDash = lineDash.concat(lineDash);\n        }\n        this.lineDash = lineDash;\n        this[67 /* mutated */]('setLineDash', [...arguments]);\n    }\n    getLineDash() {\n        return [...this.lineDash];\n    }\n    clip(pathOrFillRule, fillRule) {\n        if (typeof pathOrFillRule === 'object') {\n            throw new Error('clip(Path2D) is currently not supported!');\n        }\n        this[67 /* mutated */]('clip', [...arguments]);\n    }\n    fill(pathOrFillRule, fillRule) {\n        if (typeof pathOrFillRule === 'object') {\n            throw new Error('fill(Path2D) is currently not supported!');\n        }\n        this[67 /* mutated */]('fill', [...arguments]);\n    }\n    // Method has a different signature in MDN than it does in HTML spec\n    setTransform(transformOrA, bOrC, cOrD, dOrE, eOrF, f) {\n        if (typeof transformOrA === 'object') {\n            throw new Error('setTransform(DOMMatrix2DInit) is currently not supported!');\n        }\n        this[67 /* mutated */]('setTransform', [...arguments]);\n    }\n    createLinearGradient(x0, y0, x1, y1) {\n        const gradientId = this.objectIndex++;\n        this.createObjectReference(gradientId, 'createLinearGradient', [...arguments]);\n        return new CanvasGradient(gradientId, this.canvasElement.ownerDocument);\n    }\n    createRadialGradient(x0, y0, r0, x1, y1, r1) {\n        const gradientId = this.objectIndex++;\n        this.createObjectReference(gradientId, 'createRadialGradient', [...arguments]);\n        return new CanvasGradient(gradientId, this.canvasElement.ownerDocument);\n    }\n    createPattern(image, repetition) {\n        const patternId = this.objectIndex++;\n        this.createObjectReference(patternId, 'createPattern', [...arguments]);\n        return new CanvasPattern(patternId);\n    }\n    drawImage(image, dx, dy) {\n        this[67 /* mutated */]('drawImage', [...arguments]);\n    }\n    createImageData() {\n        return {};\n    }\n    getImageData() {\n        return {};\n    }\n    putImageData() { }\n    isPointInPath() {\n        throw new Error('isPointInPath is not implemented.');\n    }\n    isPointInStroke() {\n        throw new Error('isPointInStroke is not implemented.');\n    }\n    measureText() {\n        throw new Error('measureText is not implemented.');\n    }\n}\n//# sourceMappingURL=OffscreenCanvasPolyfill.js.map","/**\n * Copyright 2019 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { transfer } from '../MutationTransfer';\nlet indexTracker = 0;\nexport function retrieveImageBitmap(image, canvas) {\n    const callIndex = indexTracker++;\n    const document = canvas.ownerDocument;\n    return new Promise((resolve) => {\n        const messageHandler = ({ data }) => {\n            if (data[12 /* type */] === 10 /* IMAGE_BITMAP_INSTANCE */ && data[73 /* callIndex */] === callIndex) {\n                document.removeGlobalEventListener('message', messageHandler);\n                const transferredImageBitmap = data[38 /* data */];\n                resolve(transferredImageBitmap);\n            }\n        };\n        if (!document.addGlobalEventListener) {\n            throw new Error('addGlobalEventListener is not defined.');\n        }\n        else {\n            document.addGlobalEventListener('message', messageHandler);\n            transfer(canvas.ownerDocument, [11 /* IMAGE_BITMAP_INSTANCE */, image[7 /* index */], callIndex]);\n        }\n    });\n}\n//# sourceMappingURL=canvas-utils.js.map","/**\n * Copyright 2019 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a, _b;\nimport { retrieveImageBitmap } from './canvas-utils';\n/**\n * Wraps CanvasPattern for usage in a native OffscreenCanvas case.\n */\nexport class FakeNativeCanvasPattern {\n    constructor() {\n        this[_a] = {};\n        this[_b] = false;\n    }\n    /**\n     * Retrieves ImageBitmap object from main-thread, which replicates the input image. Upon\n     * retrieval, uses it to create a real CanvasPattern and upgrade the implementation property.\n     * @param canvas Canvas element used to create the pattern.\n     * @param image Image to be used as the pattern's image\n     * @param repetition DOMStrings indicating how to repeat the pattern's image.\n     */\n    [(_a = 70 /* patternImplementation */, _b = 71 /* patternUpgraded */, 72 /* patternUpgradePromise */, 69 /* retrieveCanvasPattern */)](canvas, image, repetition) {\n        this[72 /* patternUpgradePromise */] = retrieveImageBitmap(image, canvas)\n            // Create new pattern with retrieved ImageBitmap\n            .then((instance) => {\n            const pattern = canvas.getContext('2d').createPattern(instance, repetition);\n            if (!pattern) {\n                throw new Error('Pattern is null!');\n            }\n            this[70 /* patternImplementation */] = pattern;\n            this[71 /* patternUpgraded */] = true;\n        });\n        return this[72 /* patternUpgradePromise */];\n    }\n    // This method is experimental.\n    // Takes an SVGMatrix as an argument, which is a deprecated API.\n    setTransform() { }\n}\n//# sourceMappingURL=FakeNativeCanvasPattern.js.map","/**\n * Copyright 2019 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { transfer } from '../MutationTransfer';\nimport { OffscreenCanvasPolyfill } from './OffscreenCanvasPolyfill';\nimport { FakeNativeCanvasPattern } from './FakeNativeCanvasPattern';\nimport { retrieveImageBitmap } from './canvas-utils';\nexport const deferredUpgrades = new WeakMap();\n/**\n * Delegates all CanvasRenderingContext2D calls, either to an OffscreenCanvas or a polyfill\n * (depending on whether it is supported).\n */\nexport class CanvasRenderingContext2DShim {\n    constructor(canvas) {\n        this.queue = [];\n        this.upgraded = false;\n        // createPattern calls need to retrieve an ImageBitmap from the main-thread. Since those can\n        // happen subsequently, we must keep track of these to avoid reentrancy problems.\n        this.unresolvedCalls = 0;\n        this.canvasElement = canvas;\n        const OffscreenCanvas = canvas.ownerDocument.defaultView.OffscreenCanvas;\n        // If the browser does not support OffscreenCanvas, use polyfill\n        if (typeof OffscreenCanvas === 'undefined') {\n            this.implementation = new OffscreenCanvasPolyfill(canvas).getContext('2d');\n            this.upgraded = true;\n            this.polyfillUsed = true;\n        }\n        // If the browser supports OffscreenCanvas:\n        // 1. Use un-upgraded (not auto-synchronized) version for all calls performed immediately after\n        // creation. All calls will be queued to call on upgraded version after.\n        // 2. Retrieve an auto-synchronized OffscreenCanvas from the main-thread and call all methods\n        // in the queue.\n        else {\n            this.implementation = new OffscreenCanvas(0, 0).getContext('2d');\n            this.getOffscreenCanvasAsync(this.canvasElement);\n            this.polyfillUsed = false;\n        }\n    }\n    /**\n     * Retrieves auto-synchronized version of an OffscreenCanvas from the main-thread.\n     * @param canvas HTMLCanvasElement associated with this context.\n     */\n    getOffscreenCanvasAsync(canvas) {\n        this.unresolvedCalls++;\n        const deferred = {};\n        const document = this.canvasElement.ownerDocument;\n        const isTestMode = !document.addGlobalEventListener;\n        const upgradePromise = new Promise((resolve) => {\n            const messageHandler = ({ data }) => {\n                if (data[12 /* type */] === 9 /* OFFSCREEN_CANVAS_INSTANCE */ &&\n                    data[13 /* target */][0] === canvas[7 /* index */]) {\n                    document.removeGlobalEventListener('message', messageHandler);\n                    const transferredOffscreenCanvas = data[38 /* data */];\n                    resolve(transferredOffscreenCanvas);\n                }\n            };\n            if (!document.addGlobalEventListener) {\n                if (isTestMode) {\n                    deferred.resolve = resolve;\n                }\n                else {\n                    throw new Error('addGlobalEventListener is not defined.');\n                }\n            }\n            else {\n                document.addGlobalEventListener('message', messageHandler);\n                transfer(canvas.ownerDocument, [8 /* OFFSCREEN_CANVAS_INSTANCE */, canvas[7 /* index */]]);\n            }\n        }).then((instance) => {\n            this.goodImplementation = instance.getContext('2d');\n            this.maybeUpgradeImplementation();\n        });\n        if (isTestMode) {\n            deferred.upgradePromise = upgradePromise;\n            deferredUpgrades.set(canvas, deferred);\n        }\n        return upgradePromise;\n    }\n    /**\n     * Degrades the underlying context implementation and adds to the unresolved call count.\n     */\n    degradeImplementation() {\n        this.upgraded = false;\n        const OffscreenCanvas = this.canvasElement.ownerDocument.defaultView.OffscreenCanvas;\n        this.implementation = new OffscreenCanvas(0, 0).getContext('2d');\n        this.unresolvedCalls++;\n    }\n    /**\n     * Will upgrade the underlying context implementation if no more unresolved calls remain.\n     */\n    maybeUpgradeImplementation() {\n        this.unresolvedCalls--;\n        if (this.unresolvedCalls === 0) {\n            this.implementation = this.goodImplementation;\n            this.upgraded = true;\n            this.flushQueue();\n        }\n    }\n    flushQueue() {\n        for (const call of this.queue) {\n            if (call.isSetter) {\n                this[call.fnName] = call.args[0];\n            }\n            else {\n                this[call.fnName](...call.args);\n            }\n        }\n        this.queue.length = 0;\n    }\n    delegateFunc(name, args) {\n        const returnValue = this.implementation[name](...args);\n        if (!this.upgraded) {\n            this.queue.push({ fnName: name, args, isSetter: false });\n        }\n        return returnValue;\n    }\n    delegateSetter(name, args) {\n        this.implementation[name] = args[0];\n        if (!this.upgraded) {\n            this.queue.push({ fnName: name, args, isSetter: true });\n        }\n    }\n    delegateGetter(name) {\n        return this.implementation[name];\n    }\n    /* DRAWING RECTANGLES */\n    clearRect(x, y, width, height) {\n        this.delegateFunc('clearRect', [...arguments]);\n    }\n    fillRect(x, y, width, height) {\n        this.delegateFunc('fillRect', [...arguments]);\n    }\n    strokeRect(x, y, width, height) {\n        this.delegateFunc('strokeRect', [...arguments]);\n    }\n    /* DRAWING TEXT */\n    fillText(text, x, y, maxWidth) {\n        this.delegateFunc('fillText', [...arguments]);\n    }\n    strokeText(text, x, y, maxWidth) {\n        this.delegateFunc('strokeText', [...arguments]);\n    }\n    measureText(text) {\n        return this.delegateFunc('measureText', [...arguments]);\n    }\n    /* LINE STYLES */\n    set lineWidth(value) {\n        this.delegateSetter('lineWidth', [...arguments]);\n    }\n    get lineWidth() {\n        return this.delegateGetter('lineWidth');\n    }\n    set lineCap(value) {\n        this.delegateSetter('lineCap', [...arguments]);\n    }\n    get lineCap() {\n        return this.delegateGetter('lineCap');\n    }\n    set lineJoin(value) {\n        this.delegateSetter('lineJoin', [...arguments]);\n    }\n    get lineJoin() {\n        return this.delegateGetter('lineJoin');\n    }\n    set miterLimit(value) {\n        this.delegateSetter('miterLimit', [...arguments]);\n    }\n    get miterLimit() {\n        return this.delegateGetter('miterLimit');\n    }\n    getLineDash() {\n        return this.delegateFunc('getLineDash', [...arguments]);\n    }\n    setLineDash(segments) {\n        this.delegateFunc('setLineDash', [...arguments]);\n    }\n    set lineDashOffset(value) {\n        this.delegateSetter('lineDashOffset', [...arguments]);\n    }\n    get lineDashOffset() {\n        return this.delegateGetter('lineDashOffset');\n    }\n    /* TEXT STYLES */\n    set font(value) {\n        this.delegateSetter('font', [...arguments]);\n    }\n    get font() {\n        return this.delegateGetter('font');\n    }\n    set textAlign(value) {\n        this.delegateSetter('textAlign', [...arguments]);\n    }\n    get textAlign() {\n        return this.delegateGetter('textAlign');\n    }\n    set textBaseline(value) {\n        this.delegateSetter('textBaseline', [...arguments]);\n    }\n    get textBaseline() {\n        return this.delegateGetter('textBaseline');\n    }\n    set direction(value) {\n        this.delegateSetter('direction', [...arguments]);\n    }\n    get direction() {\n        return this.delegateGetter('direction');\n    }\n    /* FILL AND STROKE STYLES */\n    set fillStyle(value) {\n        // 1. Native pattern instances given to the user hold the 'real' pattern as their implementation prop.\n        // 2. Pattern must be upgraded, otherwise an undefined 'implementation' will be queued instead of the wrapper object.\n        if (value instanceof FakeNativeCanvasPattern && this.upgraded) {\n            // This case occurs only when an un-upgraded pattern is passed into a different (already\n            // upgraded) canvas context.\n            if (!value[71 /* patternUpgraded */]) {\n                this.queue.push({ fnName: 'fillStyle', args: [value], isSetter: true });\n                this.degradeImplementation();\n                value[72 /* patternUpgradePromise */].then(() => {\n                    this.maybeUpgradeImplementation();\n                });\n            }\n            else {\n                this.delegateSetter('fillStyle', [value[70 /* patternImplementation */]]);\n            }\n            // Any other case does not require special handling.\n        }\n        else {\n            this.delegateSetter('fillStyle', [...arguments]);\n        }\n    }\n    get fillStyle() {\n        return this.delegateGetter('fillStyle');\n    }\n    set strokeStyle(value) {\n        // 1. Native pattern instances given to the user hold the 'real' pattern as their implementation prop.\n        // 2. Pattern must be upgraded, otherwise an undefined 'implementation' could be queued instead of the wrapper object.\n        if (value instanceof FakeNativeCanvasPattern && this.upgraded) {\n            // This case occurs only when an un-upgraded pattern is passed into a different (already\n            // upgraded) canvas context.\n            if (!value[71 /* patternUpgraded */]) {\n                this.queue.push({\n                    fnName: 'strokeStyle',\n                    args: [value],\n                    isSetter: true,\n                });\n                this.degradeImplementation();\n                value[72 /* patternUpgradePromise */].then(() => {\n                    this.maybeUpgradeImplementation();\n                });\n            }\n            else {\n                this.delegateSetter('strokeStyle', [value[70 /* patternImplementation */]]);\n            }\n            // Any other case does not require special handling.\n        }\n        else {\n            this.delegateSetter('strokeStyle', [...arguments]);\n        }\n    }\n    get strokeStyle() {\n        return this.delegateGetter('strokeStyle');\n    }\n    /* GRADIENTS AND PATTERNS */\n    createLinearGradient(x0, y0, x1, y1) {\n        return this.delegateFunc('createLinearGradient', [...arguments]);\n    }\n    createRadialGradient(x0, y0, r0, x1, y1, r1) {\n        return this.delegateFunc('createRadialGradient', [...arguments]);\n    }\n    createPattern(image, repetition) {\n        const ImageBitmap = this.canvasElement.ownerDocument.defaultView.ImageBitmap;\n        // Only HTMLElement image sources require special handling. ImageBitmap is OK to use.\n        if (this.polyfillUsed || image instanceof ImageBitmap) {\n            return this.delegateFunc('createPattern', [...arguments]);\n        }\n        else {\n            // Degrade the underlying implementation because we don't want calls on the real one until\n            // after pattern is retrieved\n            this.degradeImplementation();\n            const fakePattern = new FakeNativeCanvasPattern();\n            fakePattern[69 /* retrieveCanvasPattern */](this.canvas, image, repetition).then(() => {\n                this.maybeUpgradeImplementation();\n            });\n            return fakePattern;\n        }\n    }\n    /* DRAWING IMAGES */\n    drawImage(image, dx, dy) {\n        const ImageBitmap = this.canvasElement.ownerDocument.defaultView.ImageBitmap;\n        // Only HTMLElement image sources require special handling. ImageBitmap is OK to use.\n        if (this.polyfillUsed || image instanceof ImageBitmap) {\n            this.delegateFunc('drawImage', [...arguments]);\n        }\n        else {\n            // Queue the drawImage call to make sure it gets called in correct order\n            const args = [];\n            this.queue.push({ fnName: 'drawImage', args, isSetter: false });\n            // Degrade the underlying implementation because we don't want calls on the real one\n            // until after the ImageBitmap is received.\n            this.degradeImplementation();\n            // Retrieve an ImageBitmap from the main-thread with the same image as the input image\n            retrieveImageBitmap(image, this.canvas)\n                // Then call the actual method with the retrieved ImageBitmap\n                .then((instance) => {\n                args.push(instance, dx, dy);\n                this.maybeUpgradeImplementation();\n            });\n        }\n    }\n    /* SHADOWS */\n    set shadowBlur(value) {\n        this.delegateSetter('shadowBlur', [...arguments]);\n    }\n    get shadowBlur() {\n        return this.delegateGetter('shadowBlur');\n    }\n    set shadowColor(value) {\n        this.delegateSetter('shadowColor', [...arguments]);\n    }\n    get shadowColor() {\n        return this.delegateGetter('shadowColor');\n    }\n    set shadowOffsetX(value) {\n        this.delegateSetter('shadowOffsetX', [...arguments]);\n    }\n    get shadowOffsetX() {\n        return this.delegateGetter('shadowOffsetX');\n    }\n    set shadowOffsetY(value) {\n        this.delegateSetter('shadowOffsetY', [...arguments]);\n    }\n    get shadowOffsetY() {\n        return this.delegateGetter('shadowOffsetY');\n    }\n    /* PATHS */\n    beginPath() {\n        this.delegateFunc('beginPath', [...arguments]);\n    }\n    closePath() {\n        this.delegateFunc('closePath', [...arguments]);\n    }\n    moveTo(x, y) {\n        this.delegateFunc('moveTo', [...arguments]);\n    }\n    lineTo(x, y) {\n        this.delegateFunc('lineTo', [...arguments]);\n    }\n    bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y) {\n        this.delegateFunc('bezierCurveTo', [...arguments]);\n    }\n    quadraticCurveTo(cpx, cpy, x, y) {\n        this.delegateFunc('quadraticCurveTo', [...arguments]);\n    }\n    arc(x, y, radius, startAngle, endAngle, antiClockwise) {\n        this.delegateFunc('arc', [...arguments]);\n    }\n    arcTo(x1, y1, x2, y2, radius) {\n        this.delegateFunc('arcTo', [...arguments]);\n    }\n    ellipse(x, y, radiusX, radiusY, rotation, startAngle, endAngle, antiClockwise) {\n        this.delegateFunc('ellipse', [...arguments]);\n    }\n    rect(x, y, width, height) {\n        this.delegateFunc('rect', [...arguments]);\n    }\n    /* DRAWING PATHS */\n    fill(pathOrFillRule, fillRule) {\n        const args = [...arguments];\n        this.delegateFunc('fill', args);\n    }\n    stroke(path) {\n        const args = [...arguments];\n        this.delegateFunc('stroke', args);\n    }\n    clip(pathOrFillRule, fillRule) {\n        const args = [...arguments];\n        this.delegateFunc('clip', args);\n    }\n    isPointInPath(pathOrX, xOrY, yOrFillRule, fillRule) {\n        const args = [...arguments];\n        return this.delegateFunc('isPointInPath', args);\n    }\n    isPointInStroke(pathOrX, xOrY, y) {\n        const args = [...arguments];\n        return this.delegateFunc('isPointInStroke', args);\n    }\n    /* TRANSFORMATIONS */\n    rotate(angle) {\n        this.delegateFunc('rotate', [...arguments]);\n    }\n    scale(x, y) {\n        this.delegateFunc('scale', [...arguments]);\n    }\n    translate(x, y) {\n        this.delegateFunc('translate', [...arguments]);\n    }\n    transform(a, b, c, d, e, f) {\n        this.delegateFunc('transform', [...arguments]);\n    }\n    setTransform(transformOrA, bOrC, cOrD, dOrE, eOrF, f) {\n        const args = [...arguments];\n        this.delegateFunc('setTransform', args);\n    }\n    /* experimental */ resetTransform() {\n        this.delegateFunc('resetTransform', [...arguments]);\n    }\n    /* COMPOSITING */\n    set globalAlpha(value) {\n        this.delegateSetter('globalAlpha', [...arguments]);\n    }\n    get globalAlpha() {\n        return this.delegateGetter('globalAlpha');\n    }\n    set globalCompositeOperation(value) {\n        this.delegateSetter('globalCompositeOperation', [...arguments]);\n    }\n    get globalCompositeOperation() {\n        return this.delegateGetter('globalCompositeOperation');\n    }\n    /* PIXEL MANIPULATION */\n    createImageData(imagedataOrWidth, height) {\n        const args = [...arguments];\n        return this.delegateFunc('createImageData', args);\n    }\n    getImageData(sx, sy, sw, sh) {\n        return this.delegateFunc('getImageData', [...arguments]);\n    }\n    putImageData(imageData, dx, dy, dirtyX, dirtyY, dirtyWidth, dirtyHeight) {\n        this.delegateFunc('putImageData', [...arguments]);\n    }\n    /* IMAGE SMOOTHING */\n    /* experimental */ set imageSmoothingEnabled(value) {\n        this.delegateSetter('imageSmoothingEnabled', [...arguments]);\n    }\n    /* experimental */ get imageSmoothingEnabled() {\n        return this.delegateGetter('imageSmoothingEnabled');\n    }\n    /* experimental */ set imageSmoothingQuality(value) {\n        this.delegateSetter('imageSmoothingQuality', [...arguments]);\n    }\n    /* experimental */ get imageSmoothingQuality() {\n        return this.delegateGetter('imageSmoothingQuality');\n    }\n    /* THE CANVAS STATE */\n    save() {\n        this.delegateFunc('save', [...arguments]);\n    }\n    restore() {\n        this.delegateFunc('restore', [...arguments]);\n    }\n    // canvas property is readonly. We don't want to implement getters, but this must be here\n    // in order for TypeScript to not complain (for now)\n    get canvas() {\n        return this.canvasElement;\n    }\n    /* FILTERS */\n    /* experimental */ set filter(value) {\n        this.delegateSetter('filter', [...arguments]);\n    }\n    /* experimental */ get filter() {\n        return this.delegateGetter('filter');\n    }\n}\n//# sourceMappingURL=CanvasRenderingContext2D.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { HTMLElement } from './HTMLElement';\nimport { registerSubclass } from './Element';\nimport { reflectProperties } from './enhanceElement';\nimport { CanvasRenderingContext2DShim } from '../canvas/CanvasRenderingContext2D';\nexport class HTMLCanvasElement extends HTMLElement {\n    getContext(contextType) {\n        if (!this.context) {\n            if (contextType === '2D' || contextType === '2d') {\n                this.context = new CanvasRenderingContext2DShim(this);\n            }\n            else {\n                throw new Error('Context type not supported.');\n            }\n        }\n        return this.context;\n    }\n}\nregisterSubclass('canvas', HTMLCanvasElement);\n// Reflected Properties\n// HTMLCanvasElement.height => number, reflected attribute\n// HTMLCanvasElement.width => number, reflected attribute\nreflectProperties([{ height: [0] }, { width: [0] }], HTMLCanvasElement);\n// Unimplemented Properties\n// HTMLCanvasElement.mozOpaque => boolean\n// HTMLCanvasElement.mozPrintCallback => function\n// Unimplemented Methods\n// HTMLCanvasElement.captureStream()\n// HTMLCanvasElement.toDataURL()\n// HTMLCanvasElement.toBlob()\n// HTMLCanvasElement.transferControlToOffscreen()\n// HTMLCanvasElement.mozGetAsFile()\n//# sourceMappingURL=HTMLCanvasElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nexport class HTMLDataElement extends HTMLElement {\n}\nregisterSubclass('data', HTMLDataElement);\n// Reflected properties, strings.\n// HTMLEmbedElement.value => string, reflected attribute\nreflectProperties([{ value: [''] }], HTMLDataElement);\n//# sourceMappingURL=HTMLDataElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nexport class HTMLDataListElement extends HTMLElement {\n    /**\n     * Getter returning option elements that are direct children of a HTMLDataListElement\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLDataListElement\n     * @return Element \"options\" objects that are direct children.\n     */\n    get options() {\n        return this.childNodes.filter((node) => node.nodeName === 'OPTION');\n    }\n}\nregisterSubclass('datalist', HTMLDataListElement);\n/**\n * HTMLDataListElement.options Read only\n * Is a HTMLCollection representing a collection of the contained option elements.\n */\n/**\n * <label for=\"myBrowser\">Choose a browser from this list:</label>\n * <input list=\"browsers\" id=\"myBrowser\" name=\"myBrowser\" />\n * <datalist id=\"browsers\">\n *   <option value=\"Chrome\">\n *   <option value=\"Firefox\">\n *   <option value=\"Internet Explorer\">\n *   <option value=\"Opera\">\n *   <option value=\"Safari\">\n *   <option value=\"Microsoft Edge\">\n * </datalist>\n */\n//# sourceMappingURL=HTMLDataListElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nexport class HTMLEmbedElement extends HTMLElement {\n}\nregisterSubclass('embed', HTMLEmbedElement);\n// Reflected properties, strings.\n// HTMLEmbedElement.height => string, reflected attribute\n// HTMLEmbedElement.src => string, reflected attribute\n// HTMLEmbedElement.type => string, reflected attribute\n// HTMLEmbedElement.width => string, reflected attribute\nreflectProperties([{ height: [''] }, { src: [''] }, { type: [''] }, { width: [''] }], HTMLEmbedElement);\n// Unimplemented\n// HTMLEmbedElement.align => string, not reflected\n// HTMLEmbedElement.name => string, not reflected\n//# sourceMappingURL=HTMLEmbedElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { matchChildrenElements, tagNameConditionPredicate } from './matchElements';\nconst MATCHING_CHILD_ELEMENT_TAGNAMES = 'BUTTON FIELDSET INPUT OBJECT OUTPUT SELECT TEXTAREA'.split(' ');\n/**\n * The HTMLFormControlsCollection interface represents a collection of HTML form control elements.\n * It is mixedin to both HTMLFormElement and HTMLFieldSetElement.\n */\nexport const HTMLFormControlsCollectionMixin = (defineOn) => {\n    Object.defineProperty(defineOn.prototype, 'elements', {\n        /**\n         * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLFormControlsCollection\n         * @return Element array matching children of specific tagnames.\n         */\n        get() {\n            return matchChildrenElements(this, tagNameConditionPredicate(MATCHING_CHILD_ELEMENT_TAGNAMES));\n        },\n    });\n};\n//# sourceMappingURL=HTMLFormControlsMixin.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { reflectProperties } from './enhanceElement';\nimport { HTMLFormControlsCollectionMixin } from './HTMLFormControlsMixin';\nimport { HTMLElement } from './HTMLElement';\nimport { toLower } from '../../utils';\nexport class HTMLFieldSetElement extends HTMLElement {\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLFieldSetElement\n     * @return hardcoded string 'fieldset'\n     */\n    get type() {\n        return toLower(this.tagName);\n    }\n}\nregisterSubclass('fieldset', HTMLFieldSetElement);\nHTMLFormControlsCollectionMixin(HTMLFieldSetElement);\n// Reflected properties\n// HTMLFieldSetElement.name => string, reflected attribute\n// HTMLFieldSetElement.disabled => boolean, reflected attribute\nreflectProperties([{ name: [''] }, { disabled: [false] }], HTMLFieldSetElement);\n// Unimplemented properties\n// HTMLFieldSetElement.validity\n// HTMLFieldSetElement.willValidate\n// HTMLFieldSetElement.validationMessage\n//# sourceMappingURL=HTMLFieldSetElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { HTMLFormControlsCollectionMixin } from './HTMLFormControlsMixin';\nimport { reflectProperties } from './enhanceElement';\nexport class HTMLFormElement extends HTMLElement {\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLFormElement/length\n     * @return number of controls in the form\n     */\n    get length() {\n        return this.elements.length;\n    }\n}\nregisterSubclass('form', HTMLFormElement);\nHTMLFormControlsCollectionMixin(HTMLFormElement);\n// Reflected properties\n// HTMLFormElement.name => string, reflected attribute\n// HTMLFormElement.method => string, reflected attribute\n// HTMLFormElement.target => string, reflected attribute\n// HTMLFormElement.action => string, reflected attribute\n// HTMLFormElement.enctype => string, reflected attribute\n// HTMLFormElement.acceptCharset => string, reflected attribute\n// HTMLFormElement.autocomplete => string, reflected attribute\n// HTMLFormElement.autocapitalize => string, reflected attribute\nreflectProperties([\n    { name: [''] },\n    { method: ['get'] },\n    { target: [''] },\n    { action: [''] },\n    { enctype: ['application/x-www-form-urlencoded'] },\n    { acceptCharset: ['', /* attr */ 'accept-charset'] },\n    { autocomplete: ['on'] },\n    { autocapitalize: ['sentences'] },\n], HTMLFormElement);\n// Unimplemented properties\n// HTMLFormElement.encoding => string, reflected attribute\n// HTMLFormElement.noValidate => boolean, reflected attribute\n/*\nUnimplemented, TBD:\n\nNamed inputs are added to their owner form instance as properties, and can overwrite native properties\nif they share the same name (eg a form with an input named action will have its action property return\nthat input instead of the form's action HTML attribute).\n*/\n//# sourceMappingURL=HTMLFormElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass, definePropertyBackedAttributes } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nimport { DOMTokenList } from './DOMTokenList';\nexport class HTMLIFrameElement extends HTMLElement {\n    // HTMLIFrameElement.sandbox, DOMTokenList, reflected attribute\n    get sandbox() {\n        return this._sandbox || (this._sandbox = new DOMTokenList(this, 'sandbox'));\n    }\n}\nregisterSubclass('iframe', HTMLIFrameElement);\ndefinePropertyBackedAttributes(HTMLIFrameElement, {\n    sandbox: [(el) => el.sandbox.value, (el, value) => (el.sandbox.value = value)],\n});\n// Reflected properties\n// HTMLIFrameElement.allow => string, reflected attribute\n// HTMLIFrameElement.allowFullscreen => boolean, reflected attribute\n// HTMLIFrameElement.csp => string, reflected attribute\n// HTMLIFrameElement.height => string, reflected attribute\n// HTMLIFrameElement.name => string, reflected attribute\n// HTMLIFrameElement.referrerPolicy => string, reflected attribute\n// HTMLIFrameElement.src => string, reflected attribute\n// HTMLIFrameElement.srcdoc => string, reflected attribute\n// HTMLIFrameElement.width => string, reflected attribute\nreflectProperties([\n    { allow: [''] },\n    { allowFullscreen: [false] },\n    { csp: [''] },\n    { height: [''] },\n    { name: [''] },\n    { referrerPolicy: [''] },\n    { src: [''] },\n    { srcdoc: [''] },\n    { width: [''] },\n], HTMLIFrameElement);\n// Unimplemented Properties\n// HTMLIFrameElement.allowPaymentRequest => boolean, reflected attribute\n// HTMLIFrameElement.contentDocument => Document, read only (active document in the inline frame's nested browsing context)\n// HTMLIFrameElement.contentWindow => WindowProxy, read only (window proxy for the nested browsing context)\n//# sourceMappingURL=HTMLIFrameElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nexport class HTMLImageElement extends HTMLElement {\n}\nregisterSubclass('img', HTMLImageElement);\n// Reflected Properties\n// HTMLImageElement.alt => string, reflected attribute\n// HTMLImageElement.crossOrigin => string, reflected attribute\n// HTMLImageElement.height => number, reflected attribute\n// HTMLImageElement.isMap => boolean, reflected attribute\n// HTMLImageElement.referrerPolicy => string, reflected attribute\n// HTMLImageElement.src => string, reflected attribute\n// HTMLImageElement.sizes => string, reflected attribute\n// HTMLImageElement.srcset => string, reflected attribute\n// HTMLImageElement.useMap => string, reflected attribute\n// HTMLImageElement.width => number, reflected attribute\nreflectProperties([\n    { alt: [''] },\n    { crossOrigin: [''] },\n    { height: [0] },\n    { isMap: [false] },\n    { referrerPolicy: [''] },\n    { src: [''] },\n    { sizes: [''] },\n    { srcset: [''] },\n    { useMap: [''] },\n    { width: [0] },\n], HTMLImageElement);\n// Unimplmented Properties\n// HTMLImageElement.complete Read only\n// Returns a Boolean that is true if the browser has finished fetching the image, whether successful or not. It also shows true, if the image has no src value.\n// HTMLImageElement.currentSrc Read only\n// Returns a DOMString representing the URL to the currently displayed image (which may change, for example in response to media queries).\n// HTMLImageElement.naturalHeight Read only\n// Returns a unsigned long representing the intrinsic height of the image in CSS pixels, if it is available; else, it shows 0.\n// HTMLImageElement.naturalWidth Read only\n// Returns a unsigned long representing the intrinsic width of the image in CSS pixels, if it is available; otherwise, it will show 0.\n//# sourceMappingURL=HTMLImageElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { matchChildrenElements } from './matchElements';\n/**\n * The HTMLInputLabels interface represents a collection of input getters for their related label Elements.\n * It is mixedin to both HTMLInputElement, HTMLMeterElement, and HTMLProgressElement.\n */\nexport const HTMLInputLabelsMixin = (defineOn) => {\n    Object.defineProperty(defineOn.prototype, 'labels', {\n        /**\n         * Getter returning label elements associated to this meter.\n         * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLProgressElement/labels\n         * @return label elements associated to this meter.\n         */\n        get() {\n            return matchChildrenElements(this.ownerDocument || this, (element) => element.tagName === 'LABEL' && element.for && element.for === this.id);\n        },\n    });\n};\n//# sourceMappingURL=HTMLInputLabelsMixin.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a, _b;\nimport { HTMLElement } from './HTMLElement';\nimport { HTMLInputLabelsMixin } from './HTMLInputLabelsMixin';\nimport { reflectProperties } from './enhanceElement';\nimport { registerSubclass } from './Element';\nimport { store as storeString } from '../strings';\nimport { transfer } from '../MutationTransfer';\nexport class HTMLInputElement extends HTMLElement {\n    constructor() {\n        super(...arguments);\n        // Per spec, some attributes like 'value' and 'checked' change behavior based on dirty flags.\n        // Since these flags can only be changed on interaction (outside of worker), we can ignore them here.\n        // Tradeoffs: Consequent attribute changes are missing, HTMLFormElement.reset() doesn't work, etc.\n        // Alternative: Implement dirty flag checking in worker-dom, which would require listening for\n        //     and forwarding interaction events to flag \"dirtiness\".\n        // https://html.spec.whatwg.org/multipage/input.html#common-input-element-apis\n        this[_a] = '';\n        this.dirtyValue = false;\n        this[_b] = false;\n    }\n    // TODO(willchou): There are a few interrelated issues with `value` property.\n    //   1. \"Dirtiness\" caveat above.\n    //   2. Duplicate SYNC events. Sent by every event fired from elements with a `value`, plus the default 'change' listener.\n    //   3. Duplicate MUTATE events. Caused by stale `value` in worker due to no default 'input' listener (see below).\n    get value() {\n        return !this.dirtyValue ? this.getAttribute('value') || '' : this[21 /* value */];\n    }\n    set value(value) {\n        // Don't early-out if value doesn't appear to have changed.\n        // The worker may have a stale value since 'input' events aren't being forwarded.\n        this[21 /* value */] = String(value);\n        this.dirtyValue = true;\n        transfer(this.ownerDocument, [\n            3 /* PROPERTIES */,\n            this[7 /* index */],\n            storeString('value'),\n            0 /* FALSE */,\n            storeString(value),\n        ]);\n    }\n    get valueAsDate() {\n        // Don't use Date constructor or Date.parse() since ISO 8601 (yyyy-mm-dd) parsing is inconsistent.\n        const date = this.stringToDate(this.value);\n        const invalid = !date || isNaN(date.getTime());\n        return invalid ? null : date;\n    }\n    /** Unlike browsers, does not throw if this input[type] doesn't support dates. */\n    set valueAsDate(value) {\n        if (!(value instanceof Date)) {\n            throw new TypeError('The provided value is not a Date.');\n        }\n        this.value = this.dateToString(value);\n    }\n    get valueAsNumber() {\n        if (this.value.length === 0) {\n            return NaN;\n        }\n        return Number(this.value);\n    }\n    /** Unlike browsers, does not throw if this input[type] doesn't support numbers. */\n    set valueAsNumber(value) {\n        if (typeof value === 'number') {\n            this.value = String(value);\n        }\n        else {\n            this.value = '';\n        }\n    }\n    get checked() {\n        return this[47 /* checked */];\n    }\n    set checked(value) {\n        if (this[47 /* checked */] === value) {\n            return;\n        }\n        this[47 /* checked */] = !!value;\n        transfer(this.ownerDocument, [\n            3 /* PROPERTIES */,\n            this[7 /* index */],\n            storeString('checked'),\n            1 /* TRUE */,\n            value === true ? 1 /* TRUE */ : 0 /* FALSE */,\n        ]);\n    }\n    /**\n     * Returns a date in 'yyyy-mm-dd' format.\n     * @param date\n     */\n    dateToString(date) {\n        const y = date.getFullYear();\n        const m = date.getMonth() + 1; // getMonth() is 0-index.\n        const d = date.getDate();\n        return `${y}-${m > 9 ? '' : '0'}${m}-${d > 9 ? '' : '0'}${d}`;\n    }\n    /**\n     * Returns a Date from a 'yyyy-mm-dd' format.\n     * @param s\n     */\n    stringToDate(str) {\n        const components = str.split('-');\n        if (components.length !== 3) {\n            return null;\n        }\n        const [y, m, d] = components;\n        // Month is 0-index.\n        return new Date(parseInt(y, 10), parseInt(m, 10) - 1, parseInt(d, 10));\n    }\n}\n_a = 21 /* value */, _b = 47 /* checked */;\nregisterSubclass('input', HTMLInputElement);\nHTMLInputLabelsMixin(HTMLInputElement);\n// Reflected Properties\n// HTMLInputElement.formAction => string, reflected attribute\n// HTMLInputElement.formEncType\t=> string, reflected attribute\n// HTMLInputElement.formMethod => string, reflected attribute\n// HTMLInputElement.formTarget => string, reflected attribute\n// HTMLInputElement.name => string, reflected attribute\n// HTMLInputElement.type => string, reflected attribute\n// HTMLInputElement.disabled => boolean, reflected attribute\n// HTMLInputElement.autofocus => boolean, reflected attribute\n// HTMLInputElement.required => boolean, reflected attribute\n// HTMLInputElement.defaultChecked => boolean, reflected attribute (\"checked\")\n// HTMLInputElement.alt => string, reflected attribute\n// HTMLInputElement.height => number, reflected attribute\n// HTMLInputElement.src => string, reflected attribute\n// HTMLInputElement.width => number, reflected attribute\n// HTMLInputElement.accept => string, reflected attribute\n// HTMLInputElement.autocomplete => string, reflected attribute\n// HTMLInputElement.maxLength => number, reflected attribute\n// HTMLInputElement.size => number, reflected attribute\n// HTMLInputElement.pattern => string, reflected attribute\n// HTMLInputElement.placeholder => string, reflected attribute\n// HTMLInputElement.readOnly => boolean, reflected attribute\n// HTMLInputElement.min => string, reflected attribute\n// HTMLInputElement.max => string, reflected attribute\n// HTMLInputElement.defaultValue => string, reflected attribute\n// HTMLInputElement.dirname => string, reflected attribute\n// HTMLInputElement.multiple => boolean, reflected attribute\n// HTMLInputElement.step => string, reflected attribute\n// HTMLInputElement.autocapitalize => string, reflected attribute\nreflectProperties([\n    { accept: [''] },\n    { alt: [''] },\n    { autocapitalize: [''] },\n    { autocomplete: [''] },\n    { autofocus: [false] },\n    { defaultChecked: [false, /* attr */ 'checked'] },\n    { defaultValue: ['', /* attr */ 'value'] },\n    { dirName: [''] },\n    { disabled: [false] },\n    { formAction: [''] },\n    { formEncType: [''] },\n    { formMethod: [''] },\n    { formTarget: [''] },\n    { height: [0] },\n    { max: [''] },\n    { maxLength: [0] },\n    { min: [''] },\n    { multiple: [false] },\n    { name: [''] },\n    { pattern: [''] },\n    { placeholder: [''] },\n    { readOnly: [false] },\n    { required: [false] },\n    { size: [0] },\n    { src: [''] },\n    { step: [''] },\n    { type: ['text'] },\n    { width: [0] },\n], HTMLInputElement);\n// TODO(KB) Not Reflected Properties\n// HTMLInputElement.indeterminate => boolean\n// Unimplemented Properties\n// HTMLInputElement.formNoValidate => string, reflected attribute\n// HTMLInputElement.validity => ValidityState, readonly\n// HTMLInputElement.validationMessage => string, readonly\n// HTMLInputElement.willValidate => boolean, readonly\n// HTMLInputElement.allowdirs => boolean\n// HTMLInputElement.files\t=> Array<File>\n// HTMLInputElement.webkitdirectory\t=> boolean, reflected attribute\n// HTMLInputElement.webkitEntries => Array<FileSystemEntry>\n// HTMLInputElement.selectionStart => number\n// HTMLInputElement.selectionEnd => number\n// HTMLInputElement.selectionDirection => string\n// HTMLInputElement.list => Element, read only (element pointed by list attribute)\n// Unimplemented Methods\n// HTMLInputElement.setSelectionRange()\n// HTMLInputElement.setRangeText()\n// HTMLInputElement.setCustomValidity()\n// HTMLInputElement.checkValidity()\n// HTMLInputElement.stepDown()\n// HTMLInputElement.stepUp()\n//# sourceMappingURL=HTMLInputElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nimport { matchChildElement, tagNameConditionPredicate } from './matchElements';\nexport class HTMLLabelElement extends HTMLElement {\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement/control\n     * @return input element\n     */\n    get control() {\n        const htmlFor = this.getAttribute('for');\n        if (htmlFor !== null) {\n            return this.ownerDocument && this.ownerDocument.getElementById(htmlFor);\n        }\n        return matchChildElement(this, tagNameConditionPredicate(['INPUT']));\n    }\n}\nregisterSubclass('label', HTMLLabelElement);\n// Reflected Properties\n// HTMLLabelElement.htmlFor => string, reflected attribute 'for'\nreflectProperties([{ htmlFor: ['', 'for'] }], HTMLLabelElement);\n//# sourceMappingURL=HTMLLabelElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass, definePropertyBackedAttributes } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nimport { DOMTokenList, synchronizedAccessor } from './DOMTokenList';\nexport class HTMLLinkElement extends HTMLElement {\n    get relList() {\n        return this._relList || (this._relList = new DOMTokenList(this, 'rel'));\n    }\n}\nregisterSubclass('link', HTMLLinkElement);\ndefinePropertyBackedAttributes(HTMLLinkElement, {\n    rel: [(el) => el.relList.value, (el, value) => (el.relList.value = value)],\n});\nsynchronizedAccessor(HTMLLinkElement, 'relList', 'rel');\n// Reflected Properties\n// HTMLLinkElement.as => string, reflected attribute\n// HTMLLinkElement.crossOrigin => string, reflected attribute\n// HTMLLinkElement.disabled => boolean, reflected attribute\n// HTMLLinkElement.href => string, reflected attribute\n// HTMLLinkElement.hreflang => string, reflected attribute\n// HTMLLinkElement.media => string, reflected attribute\n// HTMLLinkElement.referrerPolicy => string, reflected attribute\n// HTMLLinkElement.sizes => string, reflected attribute\n// HTMLLinkElement.type => string, reflected attribute\nreflectProperties([\n    { as: [''] },\n    { crossOrigin: [''] },\n    { disabled: [false] },\n    { href: [''] },\n    { hreflang: [''] },\n    { media: [''] },\n    { referrerPolicy: [''] },\n    { sizes: [''] },\n    { type: [''] },\n], HTMLLinkElement);\n// Unimplemented Properties\n// LinkStyle.sheet Read only\n// Returns the StyleSheet object associated with the given element, or null if there is none.\n//# sourceMappingURL=HTMLLinkElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nimport { matchChildrenElements } from './matchElements';\nexport class HTMLMapElement extends HTMLElement {\n    /**\n     * Getter returning area elements associated to this map.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLMapElement\n     * @return area elements associated to this map.\n     */\n    get areas() {\n        return matchChildrenElements(this, (element) => element.tagName === 'AREA');\n    }\n}\nregisterSubclass('map', HTMLMapElement);\n// Reflected Properties\n// HTMLMapElement.name => string, reflected attribute\nreflectProperties([{ name: [''] }], HTMLMapElement);\n//# sourceMappingURL=HTMLMapElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nimport { HTMLInputLabelsMixin } from './HTMLInputLabelsMixin';\nexport class HTMLMeterElement extends HTMLElement {\n}\nregisterSubclass('meter', HTMLMeterElement);\nHTMLInputLabelsMixin(HTMLMeterElement);\n// Reflected Properties\n// HTMLMeterElement.high => number, reflected attribute\n// HTMLMeterElement.low => number, reflected attribute\n// HTMLMeterElement.max => number, reflected attribute\n// HTMLMeterElement.min => number, reflected attribute\n// HTMLMeterElement.optimum => number, reflected attribute\n// HTMLMeterElement.value => number, reflected attribute\nreflectProperties([{ high: [0] }, { low: [0] }, { max: [1] }, { min: [0] }, { optimum: [0] }, { value: [0] }], HTMLMeterElement);\n//# sourceMappingURL=HTMLMeterElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nexport class HTMLModElement extends HTMLElement {\n}\nregisterSubclass('del', HTMLModElement);\nregisterSubclass('ins', HTMLModElement);\n// Reflected Properties\n// HTMLModElement.cite => string, reflected attribute\n// HTMLModElement.datetime => string, reflected attribute\nreflectProperties([{ cite: [''] }, { datetime: [''] }], HTMLModElement);\n//# sourceMappingURL=HTMLModElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nexport class HTMLOListElement extends HTMLElement {\n}\nregisterSubclass('ol', HTMLOListElement);\n// Reflected Properties\n// HTMLModElement.reversed => boolean, reflected attribute\n// HTMLModElement.start => number, reflected attribute\n// HTMLOListElement.type => string, reflected attribute\nreflectProperties([{ reversed: [false] }, { start: [1] }, { type: [''] }], HTMLOListElement);\n//# sourceMappingURL=HTMLOListElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a;\nimport { registerSubclass, definePropertyBackedAttributes } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nimport { transfer } from '../MutationTransfer';\nimport { store as storeString } from '../strings';\nexport class HTMLOptionElement extends HTMLElement {\n    constructor() {\n        super(...arguments);\n        this[_a] = false;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLOptionElement\n     * @return position of the option within the list of options it's within, or zero if there is no valid parent.\n     */\n    get index() {\n        return (this.parentNode && this.parentNode.children.indexOf(this)) || 0;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLOptionElement\n     * @return label attribute value or text content if there is no attribute.\n     */\n    get label() {\n        return this.getAttribute('label') || this.textContent;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLOptionElement\n     * @param label new label value to store as an attribute.\n     */\n    set label(label) {\n        this.setAttribute('label', label);\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLOptionElement\n     * @return boolean based on if the option element is selected.\n     */\n    get selected() {\n        return this[52 /* selected */];\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLOptionElement\n     * @param value new selected boolean value.\n     */\n    set selected(value) {\n        this[52 /* selected */] = !!value;\n        transfer(this.ownerDocument, [\n            3 /* PROPERTIES */,\n            this[7 /* index */],\n            storeString('selected'),\n            1 /* TRUE */,\n            this[52 /* selected */] ? 1 /* TRUE */ : 0 /* FALSE */,\n        ]);\n    }\n    /**\n     * A Synonym for the Node.textContent property getter.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLOptionElement\n     * @return value of text node direct child of this Element.\n     */\n    get text() {\n        return this.textContent;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLOptionElement\n     * @param text new text content to store for this Element.\n     */\n    set text(text) {\n        this.textContent = text;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLOptionElement\n     * @return value attribute value or text content if there is no attribute.\n     */\n    get value() {\n        return this.getAttribute('value') || this.textContent;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLOptionElement\n     * @param value new value for an option element.\n     */\n    set value(value) {\n        this.setAttribute('value', value);\n    }\n}\n_a = 52 /* selected */;\nregisterSubclass('option', HTMLOptionElement);\ndefinePropertyBackedAttributes(HTMLOptionElement, {\n    selected: [(el) => String(el[52 /* selected */]), (el, value) => (el.selected = value === 'true')],\n});\n// Reflected Properties\n// HTMLOptionElement.defaultSelected => boolean, reflected attribute\n// HTMLOptionElement.disabled => boolean, reflected attribute\n// HTMLOptionElement.type => string, reflected attribute\nreflectProperties([{ defaultSelected: [false, /* attr */ 'selected'] }, { disabled: [false] }, { type: [''] }], HTMLOptionElement);\n// Implemented at HTMLElement\n// HTMLOptionElement.form, Read only\t=> HTMLFormElement\n//# sourceMappingURL=HTMLOptionElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a, _b;\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nimport { HTMLInputLabelsMixin } from './HTMLInputLabelsMixin';\nexport class HTMLProgressElement extends HTMLElement {\n    constructor() {\n        super(...arguments);\n        this[_a] = true;\n        this[_b] = 0;\n        this.dirtyValue = false;\n    }\n    get position() {\n        return this[48 /* indeterminate */] ? -1 : this.value / this.max;\n    }\n    get value() {\n        return !this.dirtyValue ? Number(this.getAttribute('value')) || 0 : this[21 /* value */];\n    }\n    set value(value) {\n        this[48 /* indeterminate */] = false;\n        this[21 /* value */] = value;\n        this.dirtyValue = true;\n        // TODO(KB) This is a property mutation needing tracked.\n    }\n}\n_a = 48 /* indeterminate */, _b = 21 /* value */;\nregisterSubclass('progress', HTMLProgressElement);\nHTMLInputLabelsMixin(HTMLProgressElement);\n// Reflected Properties\n// HTMLModElement.max => number, reflected attribute\nreflectProperties([{ max: [1] }], HTMLProgressElement);\n//# sourceMappingURL=HTMLProgressElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nexport class HTMLQuoteElement extends HTMLElement {\n}\nregisterSubclass('blockquote', HTMLQuoteElement);\nregisterSubclass('q', HTMLQuoteElement);\n// Reflected Properties\n// HTMLModElement.cite => string, reflected attribute\nreflectProperties([{ cite: [''] }], HTMLQuoteElement);\n//# sourceMappingURL=HTMLQuoteElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nexport class HTMLScriptElement extends HTMLElement {\n    /**\n     * A Synonym for the Node.textContent property getter.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLScriptElement\n     * @return value of text node direct child of this Element.\n     */\n    get text() {\n        return this.textContent;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLScriptElement\n     * @param text new text content to store for this Element.\n     */\n    set text(text) {\n        this.textContent = text;\n    }\n}\nregisterSubclass('script', HTMLScriptElement);\n// Reflected Properties\n// HTMLScriptElement.type => string, reflected attribute\n// HTMLScriptElement.src => string, reflected attribute\n// HTMLScriptElement.charset => string, reflected attribute\n// HTMLScriptElement.async => boolean, reflected attribute\n// HTMLScriptElement.defer => boolean, reflected attribute\n// HTMLScriptElement.crossOrigin => string, reflected attribute\n// HTMLScriptElement.noModule => boolean, reflected attribute\nreflectProperties([{ type: [''] }, { src: [''] }, { charset: [''] }, { async: [false] }, { defer: [false] }, { crossOrigin: [''] }, { noModule: [false] }], HTMLScriptElement);\n//# sourceMappingURL=HTMLScriptElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a;\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nimport { HTMLInputLabelsMixin } from './HTMLInputLabelsMixin';\nimport { matchChildrenElements, matchChildElement, tagNameConditionPredicate } from './matchElements';\nconst isOptionPredicate = tagNameConditionPredicate(['OPTION']);\nconst isSelectedOptionPredicate = (element) => isOptionPredicate(element) && element.selected === true;\nexport class HTMLSelectElement extends HTMLElement {\n    constructor() {\n        super(...arguments);\n        this[_a] = -1 /* UNMODIFIED */;\n    }\n    /**\n     * Extend functionality after child insertion to make sure the correct option is selected.\n     * @param child\n     */\n    [(_a = 49 /* size */, 56 /* insertedNode */)](child) {\n        super[56 /* insertedNode */](child);\n        // When this singular value select is appending a child, set the value property for two cases.\n        // 1. The inserted child is already selected.\n        // 2. The current value of the select is the default ('').\n        if ((!this.multiple && isOptionPredicate(child) && child.selected) || this.value === '') {\n            this.value = child.value;\n        }\n    }\n    /**\n     * Extend functionality after child insertion to make sure the correct option is selected.\n     * @param child\n     */\n    [57 /* removedNode */](child) {\n        super[57 /* removedNode */](child);\n        // When this singular value select is removing a selected child\n        // ... set the value property to the first valid option.\n        if (!this.multiple && child.selected) {\n            const options = this.options;\n            if (options.length > 0) {\n                this.value = options[0].value;\n            }\n        }\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLSelectElement/length\n     * @return number of controls in the form\n     */\n    get length() {\n        return this.options.length;\n    }\n    /**\n     * Getter returning option elements that are direct children of a HTMLSelectElement\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLSelectElement\n     * @return Element \"options\" objects that are direct children.\n     */\n    get options() {\n        return this.children.filter(isOptionPredicate);\n    }\n    /**\n     * Getter returning the index of the first selected <option> element.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLSelectElement/selectedIndex\n     * @return the index of the first selected option element, or -1 if no element is selected.\n     */\n    get selectedIndex() {\n        const firstSelectedChild = matchChildElement(this, isSelectedOptionPredicate);\n        return firstSelectedChild ? this.children.indexOf(firstSelectedChild) : -1;\n    }\n    /**\n     * Setter making the <option> element at the passed index selected.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLSelectElement/selectedIndex\n     * @param selectedIndex index number to make selected.\n     */\n    set selectedIndex(selectedIndex) {\n        this.children.forEach((element, index) => (element.selected = index === selectedIndex));\n    }\n    /**\n     * Getter returning the <option> elements selected.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLSelectElement/selectedOptions\n     * @return array of Elements currently selected.\n     */\n    get selectedOptions() {\n        return matchChildrenElements(this, isSelectedOptionPredicate);\n    }\n    /**\n     * Getter returning the size of the select element (by default 1 for single and 4 for multiple)\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLSelectElement\n     * @return size of the select element.\n     */\n    get size() {\n        return this[49 /* size */] === -1 /* UNMODIFIED */\n            ? this.multiple\n                ? 4 /* MULTIPLE */\n                : 1 /* SINGLE */\n            : this[49 /* size */];\n    }\n    /**\n     * Override the size of this element (each positive unit is the height of a single option)\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLSelectElement\n     * @param size number to set the size to.\n     */\n    set size(size) {\n        this[49 /* size */] = size > 0 ? size : this.multiple ? 4 /* MULTIPLE */ : 1 /* SINGLE */;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLSelectElement\n     * @return string representing the select element type.\n     */\n    get type() {\n        return this.multiple ? \"select-one\" /* MULTIPLE */ : \"select-multiple\" /* SINGLE */;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLSelectElement\n     * @return the value of the first selected option\n     */\n    get value() {\n        const firstSelectedChild = matchChildElement(this, isSelectedOptionPredicate);\n        return firstSelectedChild ? firstSelectedChild.value : '';\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLSelectElement\n     * @set value\n     */\n    set value(value) {\n        const stringValue = String(value);\n        this.children.forEach((element) => isOptionPredicate(element) && (element.selected = element.value === stringValue));\n    }\n}\nregisterSubclass('select', HTMLSelectElement);\nHTMLInputLabelsMixin(HTMLSelectElement);\n// Reflected Properties\n// HTMLSelectElement.multiple => boolean, reflected attribute\n// HTMLSelectElement.name => string, reflected attribute\n// HTMLSelectElement.required => boolean, reflected attribute\nreflectProperties([{ multiple: [false] }, { name: [''] }, { required: [false] }], HTMLSelectElement);\n// Implemented on HTMLElement\n// HTMLSelectElement.form => HTMLFormElement, readonly\n// Unimplemented Properties\n// HTMLSelectElement.validation => string\n// HTMLSelectElement.validity => ValidityState\n// HTMLSelectElement.willValidate => boolean\n//# sourceMappingURL=HTMLSelectElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nexport class HTMLSourceElement extends HTMLElement {\n}\nregisterSubclass('source', HTMLSourceElement);\n// Reflected Properties\n// HTMLSourceElement.media => string, reflected attribute\n// HTMLSourceElement.sizes => string, reflected attribute\n// HTMLSourceElement.src => string, reflected attribute\n// HTMLSourceElement.srcset => string, reflected attribute\n// HTMLSourceElement.type => string, reflected attribute\nreflectProperties([{ media: [''] }, { sizes: [''] }, { src: [''] }, { srcset: [''] }, { type: [''] }], HTMLSourceElement);\n// Unimplemented Properties\n// HTMLSourceElement.keySystem => string\n//# sourceMappingURL=HTMLSourceElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nexport class HTMLStyleElement extends HTMLElement {\n}\nregisterSubclass('style', HTMLStyleElement);\n// Reflected Properties\n// HTMLStyleElement.media => string, reflected attribute\n// HTMLStyleElement.type => string, reflected attribute\nreflectProperties([{ media: [''] }, { type: [''] }], HTMLStyleElement);\n// Unimplemented Properties\n// HTMLStyleElement.disabled => boolean\n// HTMLStyleElement.scoped => boolean, reflected attribute\n// HTMLStyleElement.sheet => StyleSheet, read only\n//# sourceMappingURL=HTMLStyleElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass, definePropertyBackedAttributes } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nimport { DOMTokenList } from './DOMTokenList';\nimport { matchNearestParent, tagNameConditionPredicate, matchChildrenElements } from './matchElements';\nexport class HTMLTableCellElement extends HTMLElement {\n    get headers() {\n        return this._headers || (this._headers = new DOMTokenList(this, 'headers'));\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableCellElement\n     * @return position of the cell within the parent tr, if not nested in a tr the value is -1.\n     */\n    get cellIndex() {\n        const parent = matchNearestParent(this, tagNameConditionPredicate(['TR']));\n        return parent !== null ? matchChildrenElements(parent, tagNameConditionPredicate(['TH', 'TD'])).indexOf(this) : -1;\n    }\n}\nregisterSubclass('th', HTMLTableCellElement);\nregisterSubclass('td', HTMLTableCellElement);\ndefinePropertyBackedAttributes(HTMLTableCellElement, {\n    headers: [(el) => el.headers.value, (el, value) => (el.headers.value = value)],\n});\n// Reflected Properties\n// HTMLTableCellElement.abbr => string, reflected attribute\n// HTMLTableCellElement.colSpan => number, reflected attribute\n// HTMLTableCellElement.rowSpan => number, reflected attribute\n// HTMLTableCellElement.scope => string, reflected attribute\nreflectProperties([{ abbr: [''] }, { colSpan: [1] }, { rowSpan: [1] }, { scope: [''] }], HTMLTableCellElement);\n//# sourceMappingURL=HTMLTableCellElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nexport class HTMLTableColElement extends HTMLElement {\n}\nregisterSubclass('col', HTMLTableColElement);\n// Reflected Properties\n// HTMLTableColElement.span => number, reflected attribute\nreflectProperties([{ span: [1] }], HTMLTableColElement);\n//# sourceMappingURL=HTMLTableColElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { matchChildElement, matchChildrenElements, tagNameConditionPredicate } from './matchElements';\nimport { toUpper } from '../../utils';\nconst removeElement = (element) => element && element.remove();\nconst insertBeforeElementsWithTagName = (parent, element, tagNames) => {\n    console.assert(tagNames.every((t) => t === toUpper(t)), 'tagNames must be all uppercase.');\n    const insertBeforeElement = matchChildElement(parent, (element) => !tagNames.includes(element.tagName));\n    if (insertBeforeElement) {\n        parent.insertBefore(element, insertBeforeElement);\n    }\n    else {\n        parent.appendChild(element);\n    }\n};\nexport class HTMLTableElement extends HTMLElement {\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableElement/caption\n     * @return first matching caption Element or null if none exists.\n     */\n    get caption() {\n        return matchChildElement(this, tagNameConditionPredicate(['CAPTION']));\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableElement/caption\n     * @param element new caption element to replace the existing, or become the first element child.\n     */\n    set caption(newElement) {\n        if (newElement && newElement.tagName === 'CAPTION') {\n            // If a correct object is given,\n            // it is inserted in the tree as the first child of this element and the first <caption>\n            // that is a child of this element is removed from the tree, if any.\n            removeElement(this.caption);\n            this.insertBefore(newElement, this.firstElementChild);\n        }\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableElement/tHead\n     * @return first matching thead Element or null if none exists.\n     */\n    get tHead() {\n        return matchChildElement(this, tagNameConditionPredicate(['THEAD']));\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableElement/tHead\n     * @param newElement new thead element to insert in this table.\n     */\n    set tHead(newElement) {\n        if (newElement && newElement.tagName === 'THEAD') {\n            // If a correct object is given,\n            // it is inserted in the tree immediately before the first element that is\n            // neither a <caption>, nor a <colgroup>, or as the last child if there is no such element.\n            // Additionally, the first <thead> that is a child of this element is removed from the tree, if any.\n            removeElement(this.tHead);\n            insertBeforeElementsWithTagName(this, newElement, ['CAPTION', 'COLGROUP']);\n        }\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableElement/tHead\n     * @return first matching thead Element or null if none exists.\n     */\n    get tFoot() {\n        return matchChildElement(this, tagNameConditionPredicate(['TFOOT']));\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableElement/tHead\n     * @param newElement new tfoot element to insert in this table.\n     */\n    set tFoot(newElement) {\n        if (newElement && newElement.tagName === 'TFOOT') {\n            // If a correct object is given,\n            // it is inserted in the tree immediately before the first element that is neither a <caption>,\n            // a <colgroup>, nor a <thead>, or as the last child if there is no such element, and the first <tfoot> that is a child of\n            // this element is removed from the tree, if any.\n            removeElement(this.tFoot);\n            insertBeforeElementsWithTagName(this, newElement, ['CAPTION', 'COLGROUP', 'THEAD']);\n        }\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableElement\n     * @return array of 'tr' tagname elements\n     */\n    get rows() {\n        return matchChildrenElements(this, tagNameConditionPredicate(['TR']));\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableElement\n     * @return array of 'tbody' tagname elements\n     */\n    get tBodies() {\n        return matchChildrenElements(this, tagNameConditionPredicate(['TBODY']));\n    }\n}\nregisterSubclass('table', HTMLTableElement);\n// Unimplemented Properties\n// HTMLTableElement.sortable => boolean\n// Unimplemented Methods\n// HTMLTableElement.createTHead()\n// HTMLTableElement.deleteTHead()\n// HTMLTableElement.createTFoot()\n// HTMLTableElement.deleteTFoot()\n// HTMLTableElement.createCaption()\n// HTMLTableElement.deleteCaption()\n// HTMLTableElement.insertRow()\n// HTMLTableElement.deleteRow()\n//# sourceMappingURL=HTMLTableElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { matchNearestParent, tagNameConditionPredicate, matchChildrenElements } from './matchElements';\nconst TABLE_SECTION_TAGNAMES = 'TABLE TBODY THEAD TFOOT'.split(' ');\nconst indexInAncestor = (element, isValidAncestor) => {\n    const parent = matchNearestParent(element, isValidAncestor);\n    // TODO(KB): This is either a HTMLTableElement or HTMLTableSectionElement.\n    return parent === null ? -1 : parent.rows.indexOf(element);\n};\nexport class HTMLTableRowElement extends HTMLElement {\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableRowElement\n     * @return td and th elements that are children of this row.\n     */\n    get cells() {\n        return matchChildrenElements(this, tagNameConditionPredicate(['TD', 'TH']));\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableRowElement\n     * @return position of the row within a table, if not nested within in a table the value is -1.\n     */\n    get rowIndex() {\n        return indexInAncestor(this, tagNameConditionPredicate(['TABLE']));\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableRowElement\n     * @return position of the row within a parent section, if not nested directly in a section the value is -1.\n     */\n    get sectionRowIndex() {\n        return indexInAncestor(this, tagNameConditionPredicate(TABLE_SECTION_TAGNAMES));\n    }\n    /**\n     * Removes the cell in provided position of this row.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableRowElement\n     * @param index position of the cell in the row to remove.\n     */\n    deleteCell(index) {\n        const cell = this.cells[index];\n        if (cell) {\n            cell.remove();\n        }\n    }\n    /**\n     * Insert a new cell ('td') in the row at a specified position.\n     * @param index position in the children to insert before.\n     * @return newly inserted td element.\n     */\n    insertCell(index) {\n        const cells = this.cells;\n        const td = this.ownerDocument.createElement('td');\n        if (index < 0 || index >= cells.length) {\n            this.appendChild(td);\n        }\n        else {\n            this.insertBefore(td, this.children[index]);\n        }\n        return td;\n    }\n}\nregisterSubclass('tr', HTMLTableRowElement);\n//# sourceMappingURL=HTMLTableRowElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { tagNameConditionPredicate, matchChildrenElements } from './matchElements';\nexport class HTMLTableSectionElement extends HTMLElement {\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableSectionElement\n     * @return All rows (tr elements) within the table section.\n     */\n    get rows() {\n        return matchChildrenElements(this, tagNameConditionPredicate(['TR']));\n    }\n    /**\n     * Remove a node in a specified position from the section.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableSectionElement\n     * @param index position in the section to remove the node of.\n     */\n    deleteRow(index) {\n        const rows = this.rows;\n        if (index >= 0 || index <= rows.length) {\n            rows[index].remove();\n        }\n    }\n    /**\n     * Insert a new row ('tr') in the row at a specified position.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableSectionElement\n     * @param index position in the children to insert before.\n     * @return newly inserted tr element.\n     */\n    insertRow(index) {\n        const rows = this.rows;\n        const tr = this.ownerDocument.createElement('tr');\n        if (index < 0 || index >= rows.length) {\n            this.appendChild(tr);\n        }\n        else {\n            this.insertBefore(tr, this.children[index]);\n        }\n        return tr;\n    }\n}\nregisterSubclass('thead', HTMLTableSectionElement);\nregisterSubclass('tfoot', HTMLTableSectionElement);\nregisterSubclass('tbody', HTMLTableSectionElement);\n//# sourceMappingURL=HTMLTableSectionElement.js.map","// <blockquote> and <q>\n/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { registerSubclass } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport { reflectProperties } from './enhanceElement';\nexport class HTMLTimeElement extends HTMLElement {\n}\nregisterSubclass('time', HTMLTimeElement);\n// Reflected Properties\n// HTMLTimeElement.dateTime => string, reflected attribute\nreflectProperties([{ dateTime: [''] }], HTMLTimeElement);\n//# sourceMappingURL=HTMLTimeElement.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { CharacterData } from './CharacterData';\n// @see https://developer.mozilla.org/en-US/docs/Web/API/Text\nexport class Text extends CharacterData {\n    constructor(data, ownerDocument, overrideIndex) {\n        super(data, 3 /* TEXT_NODE */, '#text', ownerDocument, overrideIndex);\n    }\n    // Unimplemented Properties\n    // Text.isElementContentWhitespace – https://developer.mozilla.org/en-US/docs/Web/API/Text/isElementContentWhitespace\n    // Text.wholeText – https://developer.mozilla.org/en-US/docs/Web/API/Text/wholeText\n    // Text.assignedSlot – https://developer.mozilla.org/en-US/docs/Web/API/Text/assignedSlot\n    /**\n     * textContent getter, retrieves underlying CharacterData data.\n     * This is a different implmentation than DOMv1-4 APIs, but should be transparent to Frameworks.\n     */\n    get textContent() {\n        return this.data;\n    }\n    /**\n     * textContent setter, mutates underlying CharacterData data.\n     * This is a different implmentation than DOMv1-4 APIs, but should be transparent to Frameworks.\n     * @param value new value\n     */\n    set textContent(value) {\n        // Mutation Observation is performed by CharacterData.\n        this.nodeValue = value;\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/cloneNode\n     * @return new Text Node with the same data as the Text to clone.\n     */\n    cloneNode() {\n        return this.ownerDocument.createTextNode(this.data);\n    }\n    /**\n     * Breaks Text node into two nodes at the specified offset, keeping both nodes in the tree as siblings.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Text/splitText\n     * @param offset number position to split text at.\n     * @return Text Node after the offset.\n     */\n    splitText(offset) {\n        const remainderTextNode = new Text(this.data.slice(offset, this.data.length), this.ownerDocument);\n        const parentNode = this.parentNode;\n        this.nodeValue = this.data.slice(0, offset);\n        if (parentNode !== null) {\n            // When this node is attached to the DOM, the remainder text needs to be inserted directly after.\n            const parentChildNodes = parentNode.childNodes;\n            const insertBeforePosition = parentChildNodes.indexOf(this) + 1;\n            const insertBeforeNode = parentChildNodes.length >= insertBeforePosition ? parentChildNodes[insertBeforePosition] : null;\n            return parentNode.insertBefore(remainderTextNode, insertBeforeNode);\n        }\n        return remainderTextNode;\n    }\n}\n//# sourceMappingURL=Text.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { ParentNode } from './ParentNode';\nimport { store as storeString } from '../strings';\nexport class DocumentFragment extends ParentNode {\n    constructor(ownerDocument, overrideIndex) {\n        super(11 /* DOCUMENT_FRAGMENT_NODE */, '#document-fragment', ownerDocument, overrideIndex);\n        this[8 /* creationFormat */] = [this[7 /* index */], 11 /* DOCUMENT_FRAGMENT_NODE */, storeString(this.nodeName), 0, 0];\n    }\n    /**\n     * @param deep boolean determines if the clone should include a recursive copy of all childNodes.\n     * @return DocumentFragment containing childNode clones of the DocumentFragment requested to be cloned.\n     */\n    cloneNode(deep = false) {\n        const clone = this.ownerDocument.createDocumentFragment();\n        if (deep) {\n            this.childNodes.forEach((child) => clone.appendChild(child.cloneNode(deep)));\n        }\n        return clone;\n    }\n}\n//# sourceMappingURL=DocumentFragment.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { get } from './nodes';\n/**\n * When an event is dispatched from the main thread, it needs to be propagated in the worker thread.\n * Propagate adds an event listener to the worker global scope and uses the WorkerDOM Node.dispatchEvent\n * method to dispatch the transfered event in the worker thread.\n */\nexport function propagate(global) {\n    const document = global.document;\n    if (!document.addGlobalEventListener) {\n        return;\n    }\n    document.addGlobalEventListener('message', ({ data }) => {\n        if (data[12 /* type */] !== 4 /* SYNC */) {\n            return;\n        }\n        const sync = data[40 /* sync */];\n        const node = get(sync[7 /* index */]);\n        if (node) {\n            node.ownerDocument[58 /* allowTransfer */] = false;\n            // Modify the private backing ivar of `value` property to avoid mutation/sync cycle.\n            node.value = sync[21 /* value */];\n            node.ownerDocument[58 /* allowTransfer */] = true;\n        }\n    });\n}\n//# sourceMappingURL=SyncValuePropagation.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport function propagate(global) {\n    const document = global.document;\n    if (!document.addGlobalEventListener) {\n        return;\n    }\n    document.addGlobalEventListener('message', ({ data }) => {\n        if (data[12 /* type */] !== 5 /* RESIZE */) {\n            return;\n        }\n        const sync = data[40 /* sync */];\n        if (sync) {\n            global.innerWidth = sync[0];\n            global.innerHeight = sync[1];\n        }\n    });\n}\n//# sourceMappingURL=ResizePropagation.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a;\nimport { Element, NS_NAME_TO_CLASS } from './Element';\nimport { HTMLElement } from './HTMLElement';\nimport './HTMLAnchorElement';\nimport './HTMLButtonElement';\nimport './HTMLCanvasElement';\nimport './HTMLDataElement';\nimport './HTMLDataListElement';\nimport './HTMLEmbedElement';\nimport './HTMLFieldSetElement';\nimport './HTMLFormElement';\nimport './HTMLIFrameElement';\nimport './HTMLImageElement';\nimport './HTMLInputElement';\nimport './HTMLLabelElement';\nimport './HTMLLinkElement';\nimport './HTMLMapElement';\nimport './HTMLMeterElement';\nimport './HTMLModElement';\nimport './HTMLOListElement';\nimport './HTMLOptionElement';\nimport './HTMLProgressElement';\nimport './HTMLQuoteElement';\nimport './HTMLScriptElement';\nimport './HTMLSelectElement';\nimport './HTMLSourceElement';\nimport './HTMLStyleElement';\nimport './HTMLTableCellElement';\nimport './HTMLTableColElement';\nimport './HTMLTableElement';\nimport './HTMLTableRowElement';\nimport './HTMLTableSectionElement';\nimport './HTMLTimeElement';\nimport { matchChildElement } from './matchElements';\nimport { Text } from './Text';\nimport { Comment } from './Comment';\nimport { toLower } from '../../utils';\nimport { DocumentFragment } from './DocumentFragment';\nimport { HTML_NAMESPACE } from '../../transfer/TransferrableNodes';\nimport { propagate as propagateEvents } from '../Event';\nimport { propagate as propagateSyncValues } from '../SyncValuePropagation';\nimport { propagate as propagateResize } from '../ResizePropagation';\nimport { set as setPhase } from '../phase';\nconst DOCUMENT_NAME = '#document';\nexport class Document extends Element {\n    constructor(global) {\n        super(9 /* DOCUMENT_NODE */, DOCUMENT_NAME, HTML_NAMESPACE, null);\n        this[_a] = true;\n        // Element uppercases its nodeName, but Document doesn't.\n        this.nodeName = DOCUMENT_NAME;\n        this.documentElement = this; // TODO(choumx): Should be the <html> element.\n        this.defaultView = Object.assign(global, {\n            document: this,\n            addEventListener: this.addEventListener.bind(this),\n            removeEventListener: this.removeEventListener.bind(this),\n        });\n    }\n    /**\n     * Observing the Document indicates it's attached to a main thread\n     * version of the document.\n     *\n     * Each mutation needs to be transferred, synced values need to propagate.\n     */\n    [(_a = 58 /* allowTransfer */, 59 /* observe */)]() {\n        setPhase(1 /* Hydrating */);\n        propagateEvents(this.defaultView);\n        propagateSyncValues(this.defaultView);\n        propagateResize(this.defaultView);\n    }\n    /**\n     * Hydrate\n     * @param strings\n     * @param skeleton\n     */\n    [64 /* hydrateNode */](strings, skeleton) {\n        switch (skeleton[0 /* nodeType */]) {\n            case 3 /* TEXT_NODE */:\n                return new Text(strings[skeleton[5 /* textContent */]], this, skeleton[7 /* index */]);\n            case 8 /* COMMENT_NODE */:\n                return new Comment(strings[skeleton[5 /* textContent */]], this, skeleton[7 /* index */]);\n            default:\n                const namespaceURI = strings[skeleton[6 /* namespaceURI */]] || HTML_NAMESPACE;\n                const localName = strings[skeleton[1 /* localOrNodeName */]];\n                const constructor = NS_NAME_TO_CLASS[`${namespaceURI}:${localName}`] || HTMLElement;\n                const node = new constructor(1 /* ELEMENT_NODE */, localName, namespaceURI, this, skeleton[7 /* index */]);\n                (skeleton[2 /* attributes */] || []).forEach((attribute) => \n                // AttributeNamespaceURI = strings[attribute[0]] !== 'null' ? strings[attribute[0]] : HTML_NAMESPACE\n                node.setAttributeNS(strings[attribute[0]] !== 'null' ? strings[attribute[0]] : HTML_NAMESPACE, strings[attribute[1]], strings[attribute[2]]));\n                (skeleton[4 /* childNodes */] || []).forEach((child) => node.appendChild(this[64 /* hydrateNode */](strings, child)));\n                return node;\n        }\n    }\n    createElement(name) {\n        return this.createElementNS(HTML_NAMESPACE, toLower(name));\n    }\n    createElementNS(namespaceURI, localName) {\n        const constructor = NS_NAME_TO_CLASS[`${namespaceURI}:${localName}`] || HTMLElement;\n        return new constructor(1 /* ELEMENT_NODE */, localName, namespaceURI, this);\n    }\n    /**\n     * Note: Unlike DOM, Event subclasses (e.g. MouseEvent) are not instantiated based on `type`.\n     * @param type\n     */\n    createEvent(type) {\n        return new Event(type, { bubbles: false, cancelable: false });\n    }\n    createTextNode(text) {\n        return new Text(text, this);\n    }\n    createComment(text) {\n        return new Comment(text, this);\n    }\n    createDocumentFragment() {\n        return new DocumentFragment(this);\n    }\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementById\n     * @return Element with matching id attribute.\n     */\n    getElementById(id) {\n        return matchChildElement(this.body, (element) => element.id === id);\n    }\n}\n//# sourceMappingURL=Document.js.map","/**\n * Copyright 2019 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { store } from './strings';\nimport { transfer } from './MutationTransfer';\n/**\n * @param document\n * @param location\n * @param data\n */\nexport function createStorage(document, location, data) {\n    const storage = Object.assign(Object.create(null), data);\n    // Define properties on a prototype-less object instead of a class so that\n    // it behaves more like normal objects, e.g. bracket notation and JSON.stringify.\n    const define = Object.defineProperty;\n    define(storage, 'length', {\n        get() {\n            return Object.keys(this).length;\n        },\n    });\n    define(storage, 'key', {\n        value(n) {\n            const keys = Object.keys(this);\n            return n >= 0 && n < keys.length ? keys[n] : null;\n        },\n    });\n    define(storage, 'getItem', {\n        value(key) {\n            const value = this[key];\n            return value ? value : null;\n        },\n    });\n    define(storage, 'setItem', {\n        value(key, value) {\n            const stringValue = String(value);\n            this[key] = stringValue;\n            transfer(document, [12 /* STORAGE */, 2 /* SET */, location, store(key), store(stringValue)]);\n        },\n    });\n    define(storage, 'removeItem', {\n        value(key) {\n            delete this[key];\n            transfer(document, [\n                12 /* STORAGE */,\n                2 /* SET */,\n                location,\n                store(key),\n                0,\n            ]);\n        },\n    });\n    define(storage, 'clear', {\n        value() {\n            Object.keys(this).forEach((key) => {\n                delete this[key];\n            });\n            transfer(document, [\n                12 /* STORAGE */,\n                2 /* SET */,\n                location,\n                0,\n                0,\n            ]);\n        },\n    });\n    return storage;\n}\n//# sourceMappingURL=Storage.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { store as storeString } from './strings';\nimport { appendKeys as addCssKeys } from './css/CSSStyleDeclaration';\nimport { createStorage } from './Storage';\nimport { appendGlobalEventProperties } from './dom/HTMLElement';\nexport function initialize(document, strings, hydrateableNode, cssKeys, globalEventHandlerKeys, [innerWidth, innerHeight], localStorageData, sessionStorageData) {\n    addCssKeys(cssKeys);\n    appendGlobalEventProperties(globalEventHandlerKeys);\n    strings.forEach(storeString);\n    (hydrateableNode[4 /* childNodes */] || []).forEach((child) => document.body.appendChild(document[64 /* hydrateNode */](strings, child)));\n    const window = document.defaultView;\n    window.innerWidth = innerWidth;\n    window.innerHeight = innerHeight;\n    window.localStorage = createStorage(document, 0 /* Local */, localStorageData);\n    window.sessionStorage = createStorage(document, 1 /* Session */, sessionStorageData);\n}\n//# sourceMappingURL=initialize.js.map","/**\n * Copyright 2020 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst frameDuration = 1000 / 60;\nlet last = 0;\nlet id = 0;\nlet queue = [];\n/**\n * Schedules the accumulated callbacks to be fired 16ms after the last round.\n */\nfunction scheduleNext() {\n    const now = Date.now();\n    const next = Math.round(Math.max(0, frameDuration - (Date.now() - last)));\n    last = now + next;\n    setTimeout(function () {\n        var cp = queue.slice(0);\n        // Clear queue here to prevent\n        // callbacks from appending listeners\n        // to the current frame's queue\n        queue.length = 0;\n        for (var i = 0; i < cp.length; i++) {\n            if (cp[i].cancelled) {\n                continue;\n            }\n            try {\n                cp[i].callback(last);\n            }\n            catch (e) {\n                setTimeout(function () {\n                    throw e;\n                }, 0);\n            }\n        }\n    }, next);\n}\nexport function rafPolyfill(callback) {\n    if (queue.length === 0) {\n        scheduleNext();\n    }\n    if (id === Number.MAX_SAFE_INTEGER) {\n        id = 0;\n    }\n    queue.push({\n        handle: ++id,\n        callback,\n        cancelled: false,\n    });\n    return id;\n}\nexport function cafPolyfill(handle) {\n    for (let i = 0; i < queue.length; i++) {\n        if (queue[i].handle === handle) {\n            queue[i].cancelled = true;\n            return;\n        }\n    }\n}\n//# sourceMappingURL=AnimationFrame.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Element, registerSubclass } from './Element';\nimport { SVG_NAMESPACE } from '../../transfer/TransferrableNodes';\nexport class SVGElement extends Element {\n    constructor(nodeType, localName, namespaceURI, ownerDocument) {\n        super(nodeType, localName, SVG_NAMESPACE, ownerDocument);\n        // Element uppercases its nodeName, but SVG elements don't.\n        this.nodeName = localName;\n    }\n}\nregisterSubclass('svg', SVGElement, SVG_NAMESPACE);\n//# sourceMappingURL=SVGElement.js.map","/**\n * Copyright 2019 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { transfer } from './MutationTransfer';\nexport function wrap(target, func) {\n    return function () {\n        return execute(target, Promise.resolve(func.apply(null, arguments)));\n    };\n}\nfunction execute(target, promise) {\n    // Start the task.\n    transfer(target.ownerDocument, [6 /* LONG_TASK_START */, target[7 /* index */]]);\n    return promise.then((result) => {\n        // Complete the task.\n        transfer(target.ownerDocument, [7 /* LONG_TASK_END */, target[7 /* index */]]);\n        return result;\n    }, (reason) => {\n        // Complete the task.\n        transfer(target.ownerDocument, [7 /* LONG_TASK_END */, target[7 /* index */]]);\n        throw reason;\n    });\n}\n//# sourceMappingURL=long-task.js.map","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { AMP } from './amp/amp';\nimport { callFunctionMessageHandler, exportFunction } from './function';\nimport { CharacterData } from './dom/CharacterData';\nimport { Comment } from './dom/Comment';\nimport { deleteGlobals } from './amp/delete-globals';\nimport { Document } from './dom/Document';\nimport { DocumentFragment } from './dom/DocumentFragment';\nimport { DOMTokenList } from './dom/DOMTokenList';\nimport { Element } from './dom/Element';\nimport { Event as WorkerDOMEvent } from './Event';\nimport { HTMLAnchorElement } from './dom/HTMLAnchorElement';\nimport { HTMLButtonElement } from './dom/HTMLButtonElement';\nimport { HTMLCanvasElement } from './dom/HTMLCanvasElement';\nimport { HTMLDataElement } from './dom/HTMLDataElement';\nimport { HTMLDataListElement } from './dom/HTMLDataListElement';\nimport { HTMLElement } from './dom/HTMLElement';\nimport { HTMLEmbedElement } from './dom/HTMLEmbedElement';\nimport { HTMLFieldSetElement } from './dom/HTMLFieldSetElement';\nimport { HTMLFormElement } from './dom/HTMLFormElement';\nimport { HTMLIFrameElement } from './dom/HTMLIFrameElement';\nimport { HTMLImageElement } from './dom/HTMLImageElement';\nimport { HTMLInputElement } from './dom/HTMLInputElement';\nimport { HTMLLabelElement } from './dom/HTMLLabelElement';\nimport { HTMLLinkElement } from './dom/HTMLLinkElement';\nimport { HTMLMapElement } from './dom/HTMLMapElement';\nimport { HTMLMeterElement } from './dom/HTMLMeterElement';\nimport { HTMLModElement } from './dom/HTMLModElement';\nimport { HTMLOListElement } from './dom/HTMLOListElement';\nimport { HTMLOptionElement } from './dom/HTMLOptionElement';\nimport { HTMLProgressElement } from './dom/HTMLProgressElement';\nimport { HTMLQuoteElement } from './dom/HTMLQuoteElement';\nimport { HTMLScriptElement } from './dom/HTMLScriptElement';\nimport { HTMLSelectElement } from './dom/HTMLSelectElement';\nimport { HTMLSourceElement } from './dom/HTMLSourceElement';\nimport { HTMLStyleElement } from './dom/HTMLStyleElement';\nimport { HTMLTableCellElement } from './dom/HTMLTableCellElement';\nimport { HTMLTableColElement } from './dom/HTMLTableColElement';\nimport { HTMLTableElement } from './dom/HTMLTableElement';\nimport { HTMLTableRowElement } from './dom/HTMLTableRowElement';\nimport { HTMLTableSectionElement } from './dom/HTMLTableSectionElement';\nimport { HTMLTimeElement } from './dom/HTMLTimeElement';\nimport { initialize } from './initialize';\nimport { MutationObserver } from './MutationObserver';\nimport { rafPolyfill, cafPolyfill } from './AnimationFrame';\nimport { SVGElement } from './dom/SVGElement';\nimport { Text } from './dom/Text';\nimport { wrap as longTaskWrap } from './long-task';\nconst globalScope = {\n    innerWidth: 0,\n    innerHeight: 0,\n    CharacterData,\n    Comment,\n    Document,\n    DocumentFragment,\n    DOMTokenList,\n    Element,\n    HTMLAnchorElement,\n    HTMLButtonElement,\n    HTMLCanvasElement,\n    HTMLDataElement,\n    HTMLDataListElement,\n    HTMLElement,\n    HTMLEmbedElement,\n    HTMLFieldSetElement,\n    HTMLFormElement,\n    HTMLIFrameElement,\n    HTMLImageElement,\n    HTMLInputElement,\n    HTMLLabelElement,\n    HTMLLinkElement,\n    HTMLMapElement,\n    HTMLMeterElement,\n    HTMLModElement,\n    HTMLOListElement,\n    HTMLOptionElement,\n    HTMLProgressElement,\n    HTMLQuoteElement,\n    HTMLScriptElement,\n    HTMLSelectElement,\n    HTMLSourceElement,\n    HTMLStyleElement,\n    HTMLTableCellElement,\n    HTMLTableColElement,\n    HTMLTableElement,\n    HTMLTableRowElement,\n    HTMLTableSectionElement,\n    HTMLTimeElement,\n    SVGElement,\n    Text,\n    Event: WorkerDOMEvent,\n    MutationObserver,\n    requestAnimationFrame: self.requestAnimationFrame || rafPolyfill,\n    cancelAnimationFrame: self.cancelAnimationFrame || cafPolyfill,\n};\nconst noop = () => void 0;\n// WorkerDOM.Document.defaultView ends up being the window object.\n// React requires the classes to exist off the window object for instanceof checks.\nexport const workerDOM = (function (postMessage, addEventListener, removeEventListener) {\n    const document = new Document(globalScope);\n    // TODO(choumx): Avoid polluting Document's public API.\n    document.postMessage = postMessage;\n    document.addGlobalEventListener = addEventListener;\n    document.removeGlobalEventListener = removeEventListener;\n    document.isConnected = true;\n    document.appendChild((document.body = document.createElement('body')));\n    // TODO(choumx): Remove once defaultView contains all native worker globals.\n    // Canvas's use of native OffscreenCanvas checks the existence of the property\n    // on the WorkerDOMGlobalScope.\n    globalScope.OffscreenCanvas = self['OffscreenCanvas'];\n    globalScope.ImageBitmap = self['ImageBitmap'];\n    return document.defaultView;\n})(postMessage.bind(self) || noop, addEventListener.bind(self) || noop, removeEventListener.bind(self) || noop);\n// Modify global scope by removing disallowed properties and wrapping `fetch()`.\n(function (global) {\n    deleteGlobals(global);\n    // Wrap global.fetch() with our longTask API.\n    const originalFetch = global['fetch'];\n    if (originalFetch) {\n        try {\n            Object.defineProperty(global, 'fetch', {\n                enumerable: true,\n                writable: true,\n                configurable: true,\n                value: longTaskWrap(workerDOM.document, originalFetch.bind(global)),\n            });\n        }\n        catch (e) {\n            console.warn(e);\n        }\n    }\n})(self);\n// Offer APIs like AMP.setState() on the global scope.\nself.AMP = new AMP(workerDOM.document);\n// Allows for function invocation\nself.exportFunction = exportFunction;\naddEventListener('message', (evt) => callFunctionMessageHandler(evt, workerDOM.document));\nexport const hydrate = initialize;\n//# sourceMappingURL=index.amp.js.map"],"names":["count","transfer","mapping","store","consume","consumeNodes","consumeStrings","setPhase","pendingMutations","_a","storeOverrideNodeMapping","storeNodeMapping","storeString","Event","propagate","matchAttrPredicate","attrsToString","_b","propagateEvents","propagateSyncValues","propagateResize","addCssKeys","WorkerDOMEvent","longTaskWrap"],"mappings":"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"}